{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deserialize = void 0;\nvar beet = __importStar(require(\"@metaplex-foundation/beet\"));\nvar beetSolana = __importStar(require(\"@metaplex-foundation/beet-solana\"));\nvar Metadata_1 = require(\"../generated/accounts/Metadata\");\nvar Collection_1 = require(\"../generated/types/Collection\");\nvar CollectionDetails_1 = require(\"../generated/types/CollectionDetails\");\nvar Data_1 = require(\"../generated/types/Data\");\nvar Key_1 = require(\"../generated/types/Key\");\nvar TokenStandard_1 = require(\"../generated/types/TokenStandard\");\nvar Uses_1 = require(\"../generated/types/Uses\");\nvar NONE_BYTE_SIZE = beet.coptionNone('').byteSize;\nfunction deserialize(buf) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var cursor = offset;\n  var key = Key_1.keyBeet.read(buf, cursor);\n  cursor += Key_1.keyBeet.byteSize;\n  var updateAuthority = beetSolana.publicKey.read(buf, cursor);\n  cursor += beetSolana.publicKey.byteSize;\n  var mint = beetSolana.publicKey.read(buf, cursor);\n  cursor += beetSolana.publicKey.byteSize;\n  var _Data_1$dataBeet$dese = Data_1.dataBeet.deserialize(buf, cursor),\n    _Data_1$dataBeet$dese2 = _slicedToArray(_Data_1$dataBeet$dese, 2),\n    data = _Data_1$dataBeet$dese2[0],\n    dataDelta = _Data_1$dataBeet$dese2[1];\n  cursor = dataDelta;\n  var primarySaleHappened = beet.bool.read(buf, cursor);\n  cursor += beet.bool.byteSize;\n  var isMutable = beet.bool.read(buf, cursor);\n  cursor += beet.bool.byteSize;\n  var editionNonceBeet = beet.coption(beet.u8).toFixedFromData(buf, cursor);\n  var editionNonce = editionNonceBeet.read(buf, cursor);\n  cursor += editionNonceBeet.byteSize;\n  var _tryReadOption = tryReadOption(beet.coption(TokenStandard_1.tokenStandardBeet), buf, cursor),\n    _tryReadOption2 = _slicedToArray(_tryReadOption, 3),\n    tokenStandard = _tryReadOption2[0],\n    tokenDelta = _tryReadOption2[1],\n    tokenCorrupted = _tryReadOption2[2];\n  cursor += tokenDelta;\n  var _ref = tokenCorrupted ? [null, NONE_BYTE_SIZE, true] : tryReadOption(beet.coption(Collection_1.collectionBeet), buf, cursor),\n    _ref2 = _slicedToArray(_ref, 3),\n    collection = _ref2[0],\n    collectionDelta = _ref2[1],\n    collectionCorrupted = _ref2[2];\n  cursor += collectionDelta;\n  var _ref3 = tokenCorrupted || collectionCorrupted ? [null, NONE_BYTE_SIZE, true] : tryReadOption(beet.coption(Uses_1.usesBeet), buf, cursor),\n    _ref4 = _slicedToArray(_ref3, 3),\n    uses = _ref4[0],\n    usesDelta = _ref4[1],\n    usesCorrupted = _ref4[2];\n  cursor += usesDelta;\n  var _ref5 = tokenCorrupted || collectionCorrupted || usesCorrupted ? [null, NONE_BYTE_SIZE, true] : tryReadOption(beet.coption(CollectionDetails_1.collectionDetailsBeet), buf, cursor),\n    _ref6 = _slicedToArray(_ref5, 3),\n    collectionDetails = _ref6[0],\n    collectionDetailsDelta = _ref6[1],\n    collectionDetailsCorrupted = _ref6[2];\n  cursor += collectionDetailsDelta;\n  var anyCorrupted = tokenCorrupted || collectionCorrupted || usesCorrupted || collectionDetailsCorrupted;\n  var args = {\n    key: key,\n    updateAuthority: updateAuthority,\n    mint: mint,\n    data: data,\n    primarySaleHappened: primarySaleHappened,\n    isMutable: isMutable,\n    editionNonce: editionNonce,\n    tokenStandard: anyCorrupted ? null : tokenStandard,\n    collection: anyCorrupted ? null : collection,\n    uses: anyCorrupted ? null : uses,\n    collectionDetails: anyCorrupted ? null : collectionDetails\n  };\n  return [Metadata_1.Metadata.fromArgs(args), cursor];\n}\nexports.deserialize = deserialize;\nfunction tryReadOption(optionBeet, buf, offset) {\n  try {\n    var fixed = optionBeet.toFixedFromData(buf, offset);\n    var value = fixed.read(buf, offset);\n    return [value, fixed.byteSize, false];\n  } catch (err) {\n    return [null, NONE_BYTE_SIZE, true];\n  }\n}","map":{"version":3,"mappings":"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","names":["NONE_BYTE_SIZE","beet","coptionNone","byteSize","deserialize","buf","offset","cursor","key","Key_1","read","updateAuthority","beetSolana","publicKey","mint","Data_1","data","dataDelta","primarySaleHappened","bool","isMutable","editionNonceBeet","coption","u8","toFixedFromData","editionNonce","tryReadOption","TokenStandard_1","tokenStandard","tokenDelta","tokenCorrupted","Collection_1","collection","collectionDelta","collectionCorrupted","Uses_1","uses","usesDelta","usesCorrupted","CollectionDetails_1","collectionDetails","collectionDetailsDelta","collectionDetailsCorrupted","anyCorrupted","args","Metadata_1","fromArgs","exports","optionBeet","fixed","value","err"],"sources":["../../../src/custom/metadata-deserializer.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}