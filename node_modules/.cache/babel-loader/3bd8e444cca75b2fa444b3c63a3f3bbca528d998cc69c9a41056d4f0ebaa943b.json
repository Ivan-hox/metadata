{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _slicedToArray = require(\"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _createClass = require(\"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _classCallCheck = require(\"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _assertThisInitialized = require(\"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/assertThisInitialized.js\").default;\nvar _inherits = require(\"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nvar _wrapNativeSuper = require(\"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/wrapNativeSuper.js\").default;\nfunction e(e) {\n  return e && \"object\" == typeof e && \"default\" in e ? e.default : e;\n}\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n});\nvar t = e(require(\"react-dom\")),\n  r = require(\"react\"),\n  n = e(r),\n  a = e(require(\"react-modal\")),\n  l = require(\"events\"),\n  i = require(\"rxjs\"),\n  o = e(require(\"qrcode.react\")),\n  s = require(\"@ngraveio/bc-ur\");\nvar c = function c(_ref) {\n  var _ref$size = _ref.size,\n    e = _ref$size === void 0 ? 200 : _ref$size,\n    _ref$data = _ref.data,\n    t = _ref$data === void 0 ? \"\" : _ref$data,\n    _ref$ecl = _ref.ecl,\n    r = _ref$ecl === void 0 ? \"L\" : _ref$ecl;\n  return n.createElement(o, {\n    value: t,\n    size: e,\n    level: r\n  });\n};\nvar A, u, m;\n(A = exports.ReadStatus || (exports.ReadStatus = {})).canceled = \"canceled\", A.success = \"success\", (u = exports.PlayStatus || (exports.PlayStatus = {})).canceled = \"canceled\", u.success = \"success\", (m = exports.SupportedResult || (exports.SupportedResult = {})).UR_BYTES = \"bytes\", m.UR_CRYPTO_HDKEY = \"crypto-hdkey\", m.UR_CRYPTO_ACCOUNT = \"crypto-account\", m.UR_ETH_SIGN_REQUEST = \"eth-sign-request\", m.UR_ETH_SIGNATURE = \"eth-signature\", m.UR_CRYPTO_MULTI_ACCOUNTS = \"crypto-multi-accounts\", m.UR_SOL_SIGN_REQUEST = \"sol-sign-request\", m.UR_SOL_SIGNATURE = \"sol-signature\";\nvar d = {\n    minWidth: \"16rem\",\n    height: \"3rem\",\n    background: \"#784FFE\",\n    borderColor: \"grey\",\n    borderRadius: \"8px\",\n    borderWidth: 1,\n    color: \"white\",\n    outline: \"none\",\n    margin: 2\n  },\n  y = function y(e) {\n    var t = e.onClick,\n      r = e.children;\n    return n.createElement(\"button\", {\n      onClick: t,\n      style: d\n    }, r);\n  },\n  g = function g(e) {\n    return n.createElement(\"div\", {\n      style: {\n        width: \"100%\",\n        marginTop: \"1rem\",\n        display: \"flex\",\n        flexDirection: \"row-reverse\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      }\n    }, e.children);\n  },\n  E = new s.UR(Buffer.from(\"NO DATA\", \"utf-8\"));\nvar p = /*#__PURE__*/function (_Error) {\n  _inherits(p, _Error);\n  var _super = _createSuper(p);\n  function p(e) {\n    var _this;\n    _classCallCheck(this, p);\n    _this = _super.call(this, e), Object.setPrototypeOf(_assertThisInitialized(_this), p.prototype);\n    return _this;\n  }\n  return _createClass(p);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nvar S = function S() {\n    return n.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      style: {\n        margin: \"auto\",\n        display: \"block\",\n        shapeRendering: \"auto\",\n        animationPlayState: \"running\",\n        animationDelay: \"0s\"\n      },\n      width: \"200px\",\n      height: \"200px\",\n      viewBox: \"0 0 100 100\",\n      preserveAspectRatio: \"xMidYMid\"\n    }, n.createElement(\"circle\", {\n      cx: \"50\",\n      cy: \"50\",\n      fill: \"none\",\n      stroke: \"#9b9b9b\",\n      strokeWidth: \"7\",\n      r: \"35\",\n      strokeDasharray: \"164.93361431346415 56.97787143782138\",\n      style: {\n        animationPlayState: \"running\",\n        animationDelay: \"0s\"\n      }\n    }, n.createElement(\"animateTransform\", {\n      attributeName: \"transform\",\n      type: \"rotate\",\n      repeatCount: \"indefinite\",\n      dur: \"1s\",\n      values: \"0 50 50;360 50 50\",\n      keyTimes: \"0;1\",\n      style: {\n        animationPlayState: \"running\",\n        animationDelay: \"0s\"\n      }\n    })));\n  },\n  f = n.lazy(function () {\n    return new Promise(function (e) {\n      e(function (e) {\n        if (e && e.__esModule) return e;\n        var t = {};\n        return e && Object.keys(e).forEach(function (r) {\n          var n = Object.getOwnPropertyDescriptor(e, r);\n          Object.defineProperty(t, r, n.get ? n : {\n            enumerable: !0,\n            get: function get() {\n              return e[r];\n            }\n          });\n        }), t.default = e, t;\n      }(require(\"react-qr-reader\")));\n    });\n  });\nvar h = \"\";\nvar v = function v(e) {\n    return n.createElement(\"div\", {\n      style: {\n        paddingLeft: \"1rem\"\n      }\n    }, n.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"center\",\n        padding: 0\n      }\n    }, n.createElement(\"img\", {\n      style: {\n        display: \"inline-block\"\n      },\n      src: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAoCAYAAACfKfiZAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAKAAAAACc9ikyAAAD+ElEQVRYCb1WbWiNURw/Z9caY5SyrKzVhuUtZcYoJdZ8kMywGClG+WK+eJsPmogNKfZBxBbmAyPyEgvtA8UUX9inbVeb8AGTd8t2j9/vdp91ntPzPPd57h3/+t1z/uf/ev7nnP9zhUiMsmH2BOgF9ifmIjmrVpgrDWuScxfMeqUW2EqiB2sjgrlJTDsNZmHACqyP2xJzGcyq2iU4E7kTzFVw7fEw+Qbou9bn94K7FCIlgNFh6I7y0E8oAQ9/NlEBuAig71ifv4VspM1iiJnHHsGZyPohjmdzxzeu79acsyFJm8UQMnzbfONmUIvnsRTG4g3DWAM8B24DM4GkaR88WMGcxkYtQr2h+wl8niYPPJ0Aix+AU2Cu8UlmASRe0gHA1L1JYaLUBEPToc7v1hx7XdISTc/3tAiaXs+uE3K2ZdJaQE/MnLdDzvvhm3ij2wDTkc4vj3lLx/gmji7tqmL6voYNcRze17zwv4CemNuc/xt8NSoqsau5OfoD2TSAxDb+EXDTNdeX0igeHYSCaajzfGoWZWDidU90O84XWIZuYw4EvwDT0OK527GG8VUPfcuO4wPAsVvqt/MolIYDbsSmxLPUiS+gEpgBOH1Z+7HOC90MMBFXYnn0jM35S8hDrtZJCFgBluZEHB/bIWenc6XVV1Qo/MCxCoM2ucUi0lwubX4YfBng1TKvQ1426MWY1NSolAs94jJKVoYaOh2DbqGw3ddQqutqkGcooEG5rmHM+8DvMNZs7KVuUaiUWOUjOO0k9HIjSpzOq1RRv0xgus2jnTkONhxbKsZ4A7gFlMbWRChddMLtZ4v3O0YiojZvq8rkEbwCrOai278Dkw98BxYBLYD+anaB58sREzerosiAaMExjCbvl0KpooAV6HIx2IN1Bk8FTgF6cLDiCLCTk86z8mlKSCzBbr6S90NSooumiXYm8MjBgG+3KbZehXGygw6XmAQrEU0C77TETxII3ofA6zrrZR+PIAvoBrhTEnvAPIBJZAIdQLzS8r8BkxGTNqq5AxLHocQY8iYxOIKuwCu4Sxkr8B7g5bLoIiYMTjoExAtOvTqASYiORtmmJCohxRfyBv3GeqkVnDJWgLQQaAV45iw3k5oKsAMySb9UDcVaKuduUYWiX1xDObPJI/AHDBXhBsnvwiBZCXChAuA/nWdkQLxg0bJGOf8/tDtG9fxNKqNfisX4ZKamC/Gw/Zzs9e9GiL1Q5n0ICn6A5gQJ5KY7C4Ig33s90WibdXOsr3ud7wsoshcwiaAUPfegRm76syHgBylINaIX0c1hout8FecB/i/Uy23OedvZP/4Z5cDzSeAnYAZnK54P/BcahygHAD5dNh12tilAIPoLD0OnpwCV000AAAAASUVORK5CYII=\",\n      alt: \"\"\n    }), n.createElement(\"div\", {\n      style: {\n        fontSize: \"1.25rem\",\n        fontWeight: \"bold\",\n        marginLeft: \"1rem\"\n      }\n    }, \"Sync Keystone\")), n.createElement(\"ul\", {\n      style: {\n        marginTop: \"2rem\",\n        listStyleType: \"none\",\n        padding: 0,\n        fontSize: \"1rem\"\n      }\n    }, n.createElement(\"li\", {\n      style: {\n        marginBottom: \"0.75rem\"\n      }\n    }, \"1. Turn on your Keystone hardware device\"), n.createElement(\"li\", {\n      style: {\n        marginBottom: \"0.75rem\"\n      }\n    }, \"2. Select your \\\"\".concat(e.walletMode, \"\\\" as your Watch-only wallet(Companion App)\")), n.createElement(\"li\", {\n      style: {\n        marginBottom: \"0.75rem\"\n      }\n    }, \" \", '3. Press the \"Scan Keystone\" button and scan the QR Code displayed on your Keystone hardware wallet'), n.createElement(\"li\", {\n      style: {\n        marginBottom: \"0.75rem\"\n      }\n    }, \" \", \"4. Select account and check your watch-only wallet\")), n.createElement(\"div\", {\n      style: {\n        marginBottom: \"1rem\"\n      }\n    }, n.createElement(\"a\", {\n      style: {\n        marginTop: \"1.25rem\",\n        color: \"#784FFE\",\n        textDecoration: \"none\"\n      },\n      href: e.link,\n      target: \"_blank\",\n      rel: \"noreferrer\"\n    }, \"Click here to view detailed tutorial\")), n.createElement(y, {\n      onClick: e.onButtonClick\n    }, \"Sync Keystone\"));\n  },\n  x = {\n    overlay: {\n      zIndex: 999\n    },\n    content: {\n      top: \"50%\",\n      left: \"50%\",\n      right: \"auto\",\n      bottom: \"auto\",\n      borderRadius: \"10px\",\n      width: \"37rem\",\n      marginRight: \"-50%\",\n      transform: \"translate(-50%, -50%)\",\n      postion: \"relative\"\n    }\n  };\nvar w = function w() {\n  var _ref2 = function () {\n      var e = r.useMemo(function () {\n          return new l.EventEmitter();\n        }, []),\n        _r$useState = r.useState(!1),\n        _r$useState2 = _slicedToArray(_r$useState, 2),\n        t = _r$useState2[0],\n        o = _r$useState2[1],\n        _r$useState3 = r.useState(\"\"),\n        _r$useState4 = _slicedToArray(_r$useState3, 2),\n        A = _r$useState4[0],\n        u = _r$useState4[1],\n        _r$useState5 = r.useState(\"\"),\n        _r$useState6 = _slicedToArray(_r$useState5, 2),\n        m = _r$useState6[0],\n        d = _r$useState6[1],\n        _r$useState7 = r.useState(null),\n        _r$useState8 = _slicedToArray(_r$useState7, 2),\n        w = _r$useState8[0],\n        R = _r$useState8[1],\n        _ref4 = function () {\n          var _r$useState9 = r.useState(E),\n            _r$useState10 = _slicedToArray(_r$useState9, 2),\n            e = _r$useState10[0],\n            t = _r$useState10[1],\n            _r$useState11 = r.useState(!1),\n            _r$useState12 = _slicedToArray(_r$useState11, 2),\n            a = _r$useState12[0],\n            o = _r$useState12[1],\n            _r$useState13 = r.useState(100),\n            _r$useState14 = _slicedToArray(_r$useState13, 2),\n            A = _r$useState14[0],\n            u = _r$useState14[1],\n            _r$useState15 = r.useState(400),\n            _r$useState16 = _slicedToArray(_r$useState15, 2),\n            m = _r$useState16[0],\n            d = _r$useState16[1],\n            _r$useState17 = r.useState(!1),\n            _r$useState18 = _slicedToArray(_r$useState17, 2),\n            p = _r$useState18[0],\n            S = _r$useState18[1],\n            _r$useState19 = r.useState(null),\n            _r$useState20 = _slicedToArray(_r$useState19, 2),\n            f = _r$useState20[0],\n            h = _r$useState20[1],\n            _r$useState21 = r.useState(null),\n            _r$useState22 = _slicedToArray(_r$useState21, 2),\n            v = _r$useState22[0],\n            x = _r$useState22[1],\n            w = r.useMemo(function () {\n              return new s.UREncoder(e, m);\n            }, [e]),\n            _r$useState23 = r.useState(w.nextPart()),\n            _r$useState24 = _slicedToArray(_r$useState23, 2),\n            R = _r$useState24[0],\n            b = _r$useState24[1],\n            C = r.useMemo(function () {\n              return new l.EventEmitter();\n            }, []);\n          return r.useEffect(function () {\n            w.cbor.toString(\"hex\") !== E.cbor.toString(\"hex\") && o(!0);\n          }, [w]), r.useEffect(function () {\n            var e = i.interval(A).subscribe(function () {\n              b(w.nextPart());\n            });\n            return function () {\n              e.unsubscribe();\n            };\n          }, [A, w]), [a ? n.createElement(\"div\", {\n            style: {\n              display: \"flex\",\n              flexDirection: \"column\",\n              alignItems: \"center\"\n            }\n          }, f && n.createElement(\"p\", {\n            style: {\n              fontSize: \"1.25rem\",\n              fontWeight: \"bold\"\n            }\n          }, f), n.createElement(c, {\n            size: 288,\n            data: R\n          }), v && n.createElement(\"p\", {\n            style: {\n              fontSize: \"1rem\",\n              textAlign: \"center\"\n            }\n          }, v), n.createElement(g, null, n.createElement(y, {\n            onClick: function onClick() {\n              C.emit(\"finish\", !0);\n            }\n          }, p ? \"Scan Keystone\" : \"Finish\"))) : n.createElement(\"div\", null), {\n            play: function play(e, r) {\n              return new Promise(function (n) {\n                t(e), r && (r.refreshSpeed && u(r.refreshSpeed), r.hasNext && S(r.hasNext), r.title && h(r.title), r.description && x(r.description), r.maxFragmentLength && d(r.maxFragmentLength)), C.once(\"finish\", function () {\n                  t(E), o(!1), u(100), n(exports.PlayStatus.success);\n                });\n              });\n            }\n          }];\n        }(),\n        _ref5 = _slicedToArray(_ref4, 2),\n        b = _ref5[0],\n        C = _ref5[1].play,\n        _ref6 = function () {\n          var _r$useState25 = r.useState(!1),\n            _r$useState26 = _slicedToArray(_r$useState25, 2),\n            e = _r$useState26[0],\n            t = _r$useState26[1],\n            _r$useState27 = r.useState([]),\n            _r$useState28 = _slicedToArray(_r$useState27, 2),\n            a = _r$useState28[0],\n            i = _r$useState28[1],\n            _r$useState29 = r.useState(new s.URDecoder()),\n            _r$useState30 = _slicedToArray(_r$useState29, 2),\n            o = _r$useState30[0],\n            c = _r$useState30[1],\n            _r$useState31 = r.useState(\"\"),\n            _r$useState32 = _slicedToArray(_r$useState31, 2),\n            A = _r$useState32[0],\n            u = _r$useState32[1],\n            m = r.useMemo(function () {\n              return new l.EventEmitter();\n            }, []),\n            _r$useState33 = r.useState(null),\n            _r$useState34 = _slicedToArray(_r$useState33, 2),\n            d = _r$useState34[0],\n            E = _r$useState34[1],\n            _r$useState35 = r.useState(0),\n            _r$useState36 = _slicedToArray(_r$useState35, 2),\n            v = _r$useState36[0],\n            x = _r$useState36[1],\n            _r$useState37 = r.useState(null),\n            _r$useState38 = _slicedToArray(_r$useState37, 2),\n            w = _r$useState38[0],\n            R = _r$useState38[1],\n            b = function b() {\n              c(new s.URDecoder()), u(\"\");\n            };\n          return [n.createElement(\"div\", {\n            style: {\n              display: \"flex\",\n              flexDirection: \"column\",\n              alignItems: \"center\"\n            }\n          }, d && n.createElement(\"p\", {\n            style: {\n              fontSize: \"1.25rem\",\n              fontWeight: \"bold\"\n            }\n          }, d), w && n.createElement(\"p\", {\n            style: {\n              fontSize: \"1rem\",\n              textAlign: \"center\"\n            }\n          }, w), n.createElement(r.Suspense, {\n            fallback: n.createElement(\"div\", null)\n          }, n.createElement(\"div\", {\n            style: {\n              position: \"relative\",\n              width: \"100%\"\n            }\n          }, e ? null : n.createElement(\"div\", {\n            style: {\n              position: \"absolute\",\n              top: \"50%\",\n              left: \"50%\",\n              transform: \"translate(-50%, -50%)\"\n            }\n          }, n.createElement(S, null)), n.createElement(f, {\n            onScan: function onScan(e) {\n              e && (t(!0), function (e, t) {\n                try {\n                  if (o.isComplete()) {\n                    var _e = o.resultUR();\n                    var _t = !1;\n                    if (a.forEach(function (r) {\n                      if (r === _e.type) return _t = !0, void m.emit(\"read\", {\n                        result: _e,\n                        status: \"success\"\n                      });\n                    }), !_t) throw new p(\"received ur type \".concat(_e.type, \", but expected [\").concat(a.join(\",\"), \"]\"));\n                  } else o.receivePart(e), x(o.getProgress());\n                } catch (e) {\n                  u(e instanceof p ? t : e.message);\n                }\n              }(e, h));\n            },\n            delay: 100,\n            style: {\n              width: \"100%\"\n            },\n            onError: function onError(e) {\n              u(e.message);\n            }\n          }))), n.createElement(\"p\", null, (100 * v).toFixed(0), \" %\"), A && n.createElement(\"p\", {\n            style: {\n              color: \"red\",\n              fontSize: \"1rem\"\n            }\n          }, A), n.createElement(g, null, n.createElement(y, {\n            onClick: function onClick() {\n              m.emit(\"read\", {\n                status: \"canceled\"\n              });\n            }\n          }, \"Close\"), A && n.createElement(y, {\n            onClick: function onClick() {\n              b();\n            }\n          }, \"Retry\"))), {\n            read: function read(e, t) {\n              return new Promise(function (r) {\n                i(e), t && (t.title && E(t.title), t.description && R(t.description), h = t.URTypeErrorMessage ? t.URTypeErrorMessage : \"\"), m.once(\"read\", function (e) {\n                  b(), r(e);\n                });\n              });\n            },\n            cameraReady: e\n          }];\n        }(),\n        _ref7 = _slicedToArray(_ref6, 2),\n        B = _ref7[0],\n        _ref7$ = _ref7[1],\n        D = _ref7$.read,\n        U = _ref7$.cameraReady,\n        k = function k() {\n          R(null), d(\"\"), u(\"\"), o(!1);\n        };\n      var P;\n      return [n.createElement(a, {\n        isOpen: t,\n        style: x\n      }, n.createElement(\"div\", {\n        onClick: function onClick() {\n          e.emit(\"close\"), k();\n        }\n      }, n.createElement(\"img\", {\n        style: {\n          position: \"absolute\",\n          top: \"1rem\",\n          right: \"1rem\"\n        },\n        src: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAADKADAAQAAAABAAAADAAAAAATDPpdAAAAmklEQVQoFZWRwQ3DIAwAa4brJPBP80hnaD/lD5N0iYxEfRVBxBGRwsvgO2PZklJaReTrvX/eTk7O+VVKuTtgDRYVPyOeHAysAFV40jCGEB69aHN/YSRZGK4JVuKu5/DrToDoqnI9tOh4vXJ2Qlc96kSY2lTfWs0m9DCT0r3MSkUrXR9r3eBCNbuDrY/td23z7Vg3wQhGIgcD+wPGY2fPvHuWagAAAABJRU5ErkJggg==\"\n      })), n.createElement(\"div\", {\n        style: {\n          width: \"35rem\",\n          padding: 18,\n          flex: 1,\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          color: \"#002237\"\n        }\n      }, \"initial\" === (P = w) ? n.createElement(v, {\n        walletMode: A,\n        link: m,\n        onButtonClick: function onButtonClick() {\n          R(\"read\");\n        }\n      }) : \"read\" === P ? B : \"play\" === P ? b : null)), {\n        play: function play(t, r) {\n          return new Promise(function (n) {\n            e.once(\"close\", function () {\n              n(exports.PlayStatus.canceled);\n            }), o(!0), R(\"play\"), C(t, r).then(function () {\n              k(), n(exports.PlayStatus.success);\n            });\n          });\n        },\n        read: function () {\n          var _read = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(t, r) {\n            return _regeneratorRuntime().wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    return _context.abrupt(\"return\", new Promise(function (n) {\n                      e.once(\"close\", function () {\n                        k(), n({\n                          status: exports.ReadStatus.canceled\n                        });\n                      }), r.renderInitial ? (u(r.renderInitial.walletMode), d(r.renderInitial.link), R(\"initial\"), o(!0), D(t, r).then(function (e) {\n                        k(), n(e);\n                      })) : (R(\"read\"), o(!0), D(t, r).then(function (e) {\n                        k(), n(e);\n                      }));\n                    }));\n                  case 1:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n          function read(_x, _x2) {\n            return _read.apply(this, arguments);\n          }\n          return read;\n        }(),\n        cameraReady: U\n      }];\n    }(),\n    _ref3 = _slicedToArray(_ref2, 2),\n    e = _ref3[0],\n    _ref3$ = _ref3[1],\n    t = _ref3$.read,\n    o = _ref3$.play,\n    A = _ref3$.cameraReady;\n  return D(t, o, A), e;\n};\nvar R,\n  b,\n  C,\n  B = !1;\nvar D = function D(e, t, r) {\n  B = !0, R = e, b = t, C = r;\n};\nexports.default = {\n  bootstrap: function bootstrap() {\n    var e = document.getElementsByTagName(\"body\").item(0),\n      r = document.createElement(\"div\");\n    r.id = \"kv_sdk_container\", e.appendChild(r), a.setAppElement(\"#kv_sdk_container\"), t.render(n.createElement(w), r);\n  },\n  getSdk: function getSdk() {\n    if (B) return {\n      read: R,\n      play: b,\n      cameraReady: C\n    };\n    throw new Error(\"SDK is not initialized\");\n  }\n};","map":{"version":3,"mappings":"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","names":["BaseQRCode","size","data","ecl","React","QRCode","value","level","ReadStatus","PlayStatus","SupportedResult","styleBase","minWidth","height","background","borderColor","borderRadius","borderWidth","color","outline","margin","Button","props","onClick","children","style","ButtonGroup","width","marginTop","display","flexDirection","alignItems","justifyContent","DEFAULT_UR","UR","Buffer","from","URTypeError","constructor","msg","Object","setPrototypeOf","prototype","Error","LoadingSpinner","xmlns","shapeRendering","animationPlayState","animationDelay","viewBox","preserveAspectRatio","cx","cy","fill","stroke","strokeWidth","r","strokeDasharray","attributeName","type","repeatCount","dur","values","keyTimes","QrReader","lazy","e","enumerable","get","URTypeErrorMessage","InitialPage","paddingLeft","padding","src","alt","fontSize","fontWeight","marginLeft","listStyleType","marginBottom","walletMode","textDecoration","href","link","target","rel","onButtonClick","customStyles","overlay","zIndex","content","top","left","right","bottom","marginRight","transform","postion","ee","useMemo","EventEmitter","useState","visible","setVisible","setWalltMode","setLink","mode","setMode","setData","shouldShow","setShouldShow","refreshSpeed","setRefreshSpeed","maxFragmentLength","setMaxFragmentLength","hasNext","setHasNext","title","setTitle","description","setDescription","urEncoder","UREncoder","nextPart","qr","setQR","useEffect","cbor","toString","subscribe","interval","unsubscribe","textAlign","emit","play","options","Promise","resolve","once","success","useAnimatedQRCodePlayer","AnimatedQRCodePlayer","cameraReady","setCameraReady","expectTypes","setExpectTypes","URDecoder","urDecoder","setURDecoder","error","setError","progress","setProgress","reset","Suspense","fallback","position","onScan","ur","errorMessgeOnURType","isComplete","result","resultUR","foundExpected","forEach","et","status","join","receivePart","getProgress","message","delay","onError","toFixed","read","expect","useAnimatedQRCodeReader","AnimatedQRCodeReader","pageMode","Modal","isOpen","flex","canceled","then","async","renderInitial","useController","Controller","setupSdk","initialized","p","bootstrap","htmlBody","document","getElementsByTagName","item","sdkDiv","createElement","id","appendChild","setAppElement","ReactDOM","render","Root","getSdk"],"sources":["/Users/ivan/Metadata/node_modules/@keystonehq/sdk/src/components/BaseQRCode.tsx","/Users/ivan/Metadata/node_modules/@keystonehq/sdk/src/types.ts","/Users/ivan/Metadata/node_modules/@keystonehq/sdk/src/components/Button.tsx","/Users/ivan/Metadata/node_modules/@keystonehq/sdk/src/components/ButtonGroup.tsx","/Users/ivan/Metadata/node_modules/@keystonehq/sdk/src/hooks/useAnimatedQRCodePlayer.tsx","/Users/ivan/Metadata/node_modules/@keystonehq/sdk/src/error.ts","/Users/ivan/Metadata/node_modules/@keystonehq/sdk/src/components/LoadingSpinner.tsx","/Users/ivan/Metadata/node_modules/@keystonehq/sdk/src/hooks/useAnimatedQRCodeReader.tsx","/Users/ivan/Metadata/node_modules/@keystonehq/sdk/src/components/InitialPage.tsx","/Users/ivan/Metadata/node_modules/@keystonehq/sdk/src/hooks/useController.tsx","/Users/ivan/Metadata/node_modules/@keystonehq/sdk/src/Root.tsx","/Users/ivan/Metadata/node_modules/@keystonehq/sdk/src/service.ts"],"sourcesContent":["import React from \"react\";\nimport QRCode from \"qrcode.react\";\n\nexport const BaseQRCode = ({\n  size = 200,\n  data = \"\",\n  ecl = \"L\",\n}: {\n  data: string;\n  size?: number;\n  ecl?: \"L\" | \"M\" | \"Q\" | \"H\";\n}) => {\n  return <QRCode value={data} size={size} level={ecl} />;\n};\n","import { UR } from \"@ngraveio/bc-ur\";\n\ntype DecodedSuccess = {\n  result: UR;\n  status: ReadStatus.success;\n};\n\ntype DecodedCanceled = {\n  status: ReadStatus.canceled;\n};\n\nexport type DecodedResult = DecodedSuccess | DecodedCanceled;\n\nexport enum ReadStatus {\n  canceled = \"canceled\",\n  success = \"success\",\n}\n\nexport enum PlayStatus {\n  canceled = \"canceled\",\n  success = \"success\",\n}\n\nexport type Play = (\n  data: UR,\n  options?: {\n    refreshSpeed?: number;\n    hasNext?: boolean;\n    title?: string;\n    description?: string;\n    maxFragmentLength? : number;\n  }\n) => Promise<PlayStatus>;\n\nexport type Read = (\n  expect: SupportedResult[],\n  options?: {\n    title?: string;\n    description?: string;\n    renderInitial?: {\n      walletMode: string;\n      link: string;\n    };\n    URTypeErrorMessage?: string;\n  }\n) => Promise<DecodedResult>;\n\nexport enum SupportedResult {\n  UR_BYTES = \"bytes\",\n  UR_CRYPTO_HDKEY = \"crypto-hdkey\",\n  UR_CRYPTO_ACCOUNT = \"crypto-account\",\n  UR_ETH_SIGN_REQUEST = \"eth-sign-request\",\n  UR_ETH_SIGNATURE = \"eth-signature\",\n  UR_CRYPTO_MULTI_ACCOUNTS = \"crypto-multi-accounts\",\n  UR_SOL_SIGN_REQUEST = \"sol-sign-request\",\n  UR_SOL_SIGNATURE = \"sol-signature\",\n}\n","import React, { FunctionComponent } from \"react\";\n\ntype Props = {\n  onClick: () => any;\n};\n\nconst styleBase = {\n  minWidth: \"16rem\",\n  height: \"3rem\",\n  background: \"#784FFE\",\n  borderColor: \"grey\",\n  borderRadius: \"8px\",\n  borderWidth: 1,\n  color: \"white\",\n  outline: \"none\",\n  margin: 2,\n};\n\nexport const Button: FunctionComponent<Props> = (props) => {\n  const { onClick, children } = props;\n  return (\n    <button onClick={onClick} style={styleBase}>\n      {children}\n    </button>\n  );\n};\n","import React, { FunctionComponent } from \"react\";\n\nexport const ButtonGroup: FunctionComponent = (props) => {\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        marginTop: \"1rem\",\n        display: \"flex\",\n        flexDirection: \"row-reverse\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n      }}\n    >\n      {props.children}\n    </div>\n  );\n};\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport { interval } from \"rxjs\";\nimport { BaseQRCode } from \"../components/BaseQRCode\";\nimport { Play, PlayStatus } from \"../types\";\nimport { EventEmitter } from \"events\";\nimport { Button } from \"../components/Button\";\nimport { ButtonGroup } from \"../components/ButtonGroup\";\nimport { UR, UREncoder } from \"@ngraveio/bc-ur\";\n\nconst DEFAULT_SPEED = 100;\n\nconst DEFAULT_MAX_FRAGMENT_LENGTH = 400;\n\nconst DEFAULT_UR = new UR(Buffer.from(\"NO DATA\", \"utf-8\"));\n\nexport const useAnimatedQRCodePlayer = (): [JSX.Element, { play: Play }] => {\n  const [data, setData] = useState<UR>(DEFAULT_UR);\n  const [shouldShow, setShouldShow] = useState(false);\n\n  const [refreshSpeed, setRefreshSpeed] = useState(DEFAULT_SPEED);\n  const [maxFragmentLength, setMaxFragmentLength] = useState(DEFAULT_MAX_FRAGMENT_LENGTH)\n  const [hasNext, setHasNext] = useState(false);\n  const [title, setTitle] = useState<string | null>(null);\n  const [description, setDescription] = useState<string | null>(null);\n\n  const urEncoder = useMemo(() => new UREncoder(data, maxFragmentLength), [data]);\n\n  const [qr, setQR] = useState<string>(urEncoder.nextPart());\n\n  const ee = useMemo(() => new EventEmitter(), []);\n  const reset = () => {\n    setData(DEFAULT_UR);\n    setShouldShow(false);\n    setRefreshSpeed(DEFAULT_SPEED);\n  };\n\n  useEffect(() => {\n    if (urEncoder.cbor.toString(\"hex\") !== DEFAULT_UR.cbor.toString(\"hex\")) {\n      setShouldShow(true);\n    }\n  }, [urEncoder]);\n\n  useEffect(() => {\n    const subscribe = interval(refreshSpeed).subscribe(() => {\n      setQR(urEncoder.nextPart());\n    });\n    return () => {\n      subscribe.unsubscribe();\n    };\n  }, [refreshSpeed, urEncoder]);\n\n  const finish = () => {\n    ee.emit(\"finish\", true);\n  };\n\n  const element = shouldShow ? (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n      }}\n    >\n      {title && (\n        <p style={{ fontSize: \"1.25rem\", fontWeight: \"bold\" }}>{title}</p>\n      )}\n      <BaseQRCode size={288} data={qr} />\n      {description && (\n        <p style={{ fontSize: \"1rem\", textAlign: \"center\" }}>{description}</p>\n      )}\n      <ButtonGroup>\n        <Button onClick={finish}>{hasNext ? \"Scan Keystone\" : \"Finish\"}</Button>\n      </ButtonGroup>\n    </div>\n  ) : (\n    <div></div>\n  );\n\n  return [\n    element,\n    {\n      play: (data, options) => {\n        return new Promise((resolve) => {\n          setData(data);\n          if (options) {\n            options.refreshSpeed && setRefreshSpeed(options.refreshSpeed);\n            options.hasNext && setHasNext(options.hasNext);\n            options.title && setTitle(options.title);\n            options.description && setDescription(options.description);\n            options.maxFragmentLength && setMaxFragmentLength(options.maxFragmentLength)\n          }\n          ee.once(\"finish\", () => {\n            reset();\n            resolve(PlayStatus.success);\n          });\n        });\n      },\n    },\n  ];\n};\n","export class URTypeError extends Error {\n  constructor(msg: string) {\n    super(msg);\n\n    // Set the prototype explicitly.\n    Object.setPrototypeOf(this, URTypeError.prototype);\n  }\n}\n","import React from \"react\";\n\nexport const LoadingSpinner = () => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      style={{\n        margin: \"auto\",\n        display: \"block\",\n        shapeRendering: \"auto\",\n        animationPlayState: \"running\",\n        animationDelay: \"0s\",\n      }}\n      width=\"200px\"\n      height=\"200px\"\n      viewBox=\"0 0 100 100\"\n      preserveAspectRatio=\"xMidYMid\"\n    >\n      <circle\n        cx=\"50\"\n        cy=\"50\"\n        fill=\"none\"\n        stroke=\"#9b9b9b\"\n        strokeWidth=\"7\"\n        r=\"35\"\n        strokeDasharray=\"164.93361431346415 56.97787143782138\"\n        style={{ animationPlayState: \"running\", animationDelay: \"0s\" }}\n      >\n        <animateTransform\n          attributeName=\"transform\"\n          type=\"rotate\"\n          repeatCount=\"indefinite\"\n          dur=\"1s\"\n          values=\"0 50 50;360 50 50\"\n          keyTimes=\"0;1\"\n          style={{ animationPlayState: \"running\", animationDelay: \"0s\" }}\n        ></animateTransform>\n      </circle>\n    </svg>\n  );\n};\n","import React, { useMemo, useState, Suspense } from \"react\";\nimport { EventEmitter } from \"events\";\nimport { Button } from \"../components/Button\";\nimport { URTypeError } from \"../error\";\n\nimport { Read, SupportedResult } from \"../types\";\nimport { ButtonGroup } from \"../components/ButtonGroup\";\nimport { LoadingSpinner } from \"../components/LoadingSpinner\";\nimport { URDecoder } from \"@ngraveio/bc-ur\";\n\nconst QrReader = React.lazy(() => import(\"react-qr-reader\"));\n\nexport interface URQRCodeData {\n  total: number;\n  index: number;\n  data: string;\n}\n\nlet URTypeErrorMessage = \"\";\n\nexport const useAnimatedQRCodeReader = (): [\n  JSX.Element,\n  { read: Read; cameraReady: boolean }\n] => {\n  const [cameraReady, setCameraReady] = useState<boolean>(false);\n  const [expectTypes, setExpectTypes] = useState<SupportedResult[]>([]);\n  const [urDecoder, setURDecoder] = useState(new URDecoder());\n  const [error, setError] = useState(\"\");\n  const ee = useMemo(() => new EventEmitter(), []);\n  const [title, setTitle] = useState<string | null>(null);\n  const [progress, setProgress] = useState(0);\n  const [description, setDescription] = useState<string | null>(null);\n  const reset = () => {\n    setURDecoder(new URDecoder());\n    setError(\"\");\n  };\n\n  const processQRCode = (qr: string, errorMessgeOnURType: string) => {\n    processUR(qr, errorMessgeOnURType);\n  };\n\n  const handleStop = () => {\n    ee.emit(\"read\", {\n      status: \"canceled\",\n    });\n  };\n\n  const handleRetry = () => {\n    reset();\n  };\n\n  const processUR = (ur: string, errorMessgeOnURType: string) => {\n    try {\n      if (!urDecoder.isComplete()) {\n        urDecoder.receivePart(ur);\n        setProgress(urDecoder.getProgress());\n      } else {\n        const result = urDecoder.resultUR();\n        let foundExpected = false;\n        expectTypes.forEach((et) => {\n          if (et === result.type) {\n            foundExpected = true;\n            ee.emit(\"read\", {\n              result,\n              status: \"success\",\n            });\n            return;\n          }\n        });\n        if (!foundExpected)\n          throw new URTypeError(\n            `received ur type ${result.type}, but expected [${expectTypes.join(\n              \",\"\n            )}]`\n          );\n      }\n    } catch (e) {\n      if (e instanceof URTypeError) {\n        setError(errorMessgeOnURType);\n      } else {\n        setError((e as Error).message);\n      }\n    }\n  };\n\n  const element = (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n      }}\n    >\n      {title && (\n        <p style={{ fontSize: \"1.25rem\", fontWeight: \"bold\" }}>{title}</p>\n      )}\n      {description && (\n        <p style={{ fontSize: \"1rem\", textAlign: \"center\" }}>{description}</p>\n      )}\n      <Suspense fallback={<div />}>\n        <div style={{ position: \"relative\", width: \"100%\" }}>\n          {!cameraReady ? (\n            <div\n              style={{\n                position: \"absolute\",\n                top: \"50%\",\n                left: \"50%\",\n                transform: \"translate(-50%, -50%)\",\n              }}\n            >\n              <LoadingSpinner />\n            </div>\n          ) : null}\n          <QrReader\n            onScan={(data: any) => {\n              if (data) {\n                setCameraReady(true);\n                processQRCode(data, URTypeErrorMessage);\n              }\n            }}\n            delay={100}\n            style={{ width: \"100%\" }}\n            onError={(e) => {\n              setError(e.message);\n            }}\n          />\n        </div>\n      </Suspense>\n      <p>{(progress * 100).toFixed(0)} %</p>\n      {error && <p style={{ color: \"red\", fontSize: \"1rem\" }}>{error}</p>}\n      <ButtonGroup>\n        <Button onClick={handleStop}>Close</Button>\n        {error && <Button onClick={handleRetry}>Retry</Button>}\n      </ButtonGroup>\n    </div>\n  );\n\n  return [\n    element,\n    {\n      read: (expect, options) => {\n        return new Promise((resolve) => {\n          setExpectTypes(expect);\n          if (options) {\n            options.title && setTitle(options.title);\n            options.description && setDescription(options.description);\n            URTypeErrorMessage = options.URTypeErrorMessage\n              ? options.URTypeErrorMessage\n              : \"\";\n          }\n          ee.once(\"read\", (result) => {\n            reset();\n            resolve(result);\n          });\n        });\n      },\n      cameraReady,\n    },\n  ];\n};\n","import React from \"react\";\nimport { Button } from \"./Button\";\n\nexport const InitialPage = (props: {\n  walletMode: string;\n  link: string;\n  onButtonClick: () => void;\n}) => {\n  return (\n    <div style={{ paddingLeft: \"1rem\" }}>\n      <div style={{ display: \"flex\", alignItems: \"center\", padding: 0 }}>\n        <img\n          style={{ display: \"inline-block\" }}\n          src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAoCAYAAACfKfiZAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAKAAAAACc9ikyAAAD+ElEQVRYCb1WbWiNURw/Z9caY5SyrKzVhuUtZcYoJdZ8kMywGClG+WK+eJsPmogNKfZBxBbmAyPyEgvtA8UUX9inbVeb8AGTd8t2j9/vdp91ntPzPPd57h3/+t1z/uf/ev7nnP9zhUiMsmH2BOgF9ifmIjmrVpgrDWuScxfMeqUW2EqiB2sjgrlJTDsNZmHACqyP2xJzGcyq2iU4E7kTzFVw7fEw+Qbou9bn94K7FCIlgNFh6I7y0E8oAQ9/NlEBuAig71ifv4VspM1iiJnHHsGZyPohjmdzxzeu79acsyFJm8UQMnzbfONmUIvnsRTG4g3DWAM8B24DM4GkaR88WMGcxkYtQr2h+wl8niYPPJ0Aix+AU2Cu8UlmASRe0gHA1L1JYaLUBEPToc7v1hx7XdISTc/3tAiaXs+uE3K2ZdJaQE/MnLdDzvvhm3ij2wDTkc4vj3lLx/gmji7tqmL6voYNcRze17zwv4CemNuc/xt8NSoqsau5OfoD2TSAxDb+EXDTNdeX0igeHYSCaajzfGoWZWDidU90O84XWIZuYw4EvwDT0OK527GG8VUPfcuO4wPAsVvqt/MolIYDbsSmxLPUiS+gEpgBOH1Z+7HOC90MMBFXYnn0jM35S8hDrtZJCFgBluZEHB/bIWenc6XVV1Qo/MCxCoM2ucUi0lwubX4YfBng1TKvQ1426MWY1NSolAs94jJKVoYaOh2DbqGw3ddQqutqkGcooEG5rmHM+8DvMNZs7KVuUaiUWOUjOO0k9HIjSpzOq1RRv0xgus2jnTkONhxbKsZ4A7gFlMbWRChddMLtZ4v3O0YiojZvq8rkEbwCrOai278Dkw98BxYBLYD+anaB58sREzerosiAaMExjCbvl0KpooAV6HIx2IN1Bk8FTgF6cLDiCLCTk86z8mlKSCzBbr6S90NSooumiXYm8MjBgG+3KbZehXGygw6XmAQrEU0C77TETxII3ofA6zrrZR+PIAvoBrhTEnvAPIBJZAIdQLzS8r8BkxGTNqq5AxLHocQY8iYxOIKuwCu4Sxkr8B7g5bLoIiYMTjoExAtOvTqASYiORtmmJCohxRfyBv3GeqkVnDJWgLQQaAV45iw3k5oKsAMySb9UDcVaKuduUYWiX1xDObPJI/AHDBXhBsnvwiBZCXChAuA/nWdkQLxg0bJGOf8/tDtG9fxNKqNfisX4ZKamC/Gw/Zzs9e9GiL1Q5n0ICn6A5gQJ5KY7C4Ig33s90WibdXOsr3ud7wsoshcwiaAUPfegRm76syHgBylINaIX0c1hout8FecB/i/Uy23OedvZP/4Z5cDzSeAnYAZnK54P/BcahygHAD5dNh12tilAIPoLD0OnpwCV000AAAAASUVORK5CYII=\"\n          alt=\"\"\n        />\n        <div\n          style={{\n            fontSize: \"1.25rem\",\n            fontWeight: \"bold\",\n            marginLeft: \"1rem\",\n          }}\n        >\n          Sync Keystone\n        </div>\n      </div>\n      <ul\n        style={{\n          marginTop: \"2rem\",\n          listStyleType: \"none\",\n          padding: 0,\n          fontSize: \"1rem\",\n        }}\n      >\n        <li style={{ marginBottom: \"0.75rem\" }}>\n          1. Turn on your Keystone hardware device\n        </li>\n        <li\n          style={{ marginBottom: \"0.75rem\" }}\n        >{`2. Select your \"${props.walletMode}\" as your Watch-only wallet(Companion App)`}</li>\n        <li style={{ marginBottom: \"0.75rem\" }}>\n          {\" \"}\n          3. Press the \"Scan Keystone\" button and scan the QR Code displayed on\n          your Keystone hardware wallet\n        </li>\n        <li style={{ marginBottom: \"0.75rem\" }}>\n          {\" \"}\n          4. Select account and check your watch-only wallet\n        </li>\n      </ul>\n      <div style={{ marginBottom: \"1rem\" }}>\n        <a\n          style={{\n            marginTop: \"1.25rem\",\n            color: \"#784FFE\",\n            textDecoration: \"none\",\n          }}\n          href={props.link}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          Click here to view detailed tutorial\n        </a>\n      </div>\n      <Button onClick={props.onButtonClick}>Sync Keystone</Button>\n    </div>\n  );\n};\n","import React, { useMemo, useState } from \"react\";\nimport Modal from \"react-modal\";\nimport { EventEmitter } from \"events\";\nimport { useAnimatedQRCodePlayer } from \"./useAnimatedQRCodePlayer\";\nimport { useAnimatedQRCodeReader } from \"./useAnimatedQRCodeReader\";\nimport { Play, PlayStatus, Read, ReadStatus } from \"../types\";\nimport { InitialPage } from \"../components/InitialPage\";\n\nconst customStyles = {\n  overlay: {\n    zIndex: 999,\n  },\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    borderRadius: \"10px\",\n    width: \"37rem\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n    postion: \"relative\",\n  },\n};\n\nexport const useController = (): [\n  JSX.Element,\n  {\n    play: Play;\n    read: Read;\n    cameraReady: boolean;\n  }\n] => {\n  const ee = useMemo(() => new EventEmitter(), []);\n  const [visible, setVisible] = useState(false);\n  const [walletMode, setWalltMode] = useState(\"\");\n  const [link, setLink] = useState(\"\");\n  const [mode, setMode] = useState<\"read\" | \"play\" | \"initial\" | null>(null);\n  const [AnimatedQRCodePlayer, { play }] = useAnimatedQRCodePlayer();\n  const [AnimatedQRCodeReader, { read, cameraReady }] =\n    useAnimatedQRCodeReader();\n  const close = () => {\n    ee.emit(\"close\");\n    reset();\n  };\n\n  const reset = () => {\n    setMode(null);\n    setLink(\"\");\n    setWalltMode(\"\");\n    setVisible(false);\n  };\n\n  const goToRead = () => {\n    setMode(\"read\");\n  };\n\n  const renderPannel = (pageMode: string) => {\n    if (pageMode === \"initial\") {\n      return (\n        <InitialPage\n          walletMode={walletMode}\n          link={link}\n          onButtonClick={goToRead}\n        />\n      );\n    } else if (pageMode === \"read\") {\n      return AnimatedQRCodeReader;\n    } else if (pageMode === \"play\") {\n      return AnimatedQRCodePlayer;\n    } else {\n      return null;\n    }\n  };\n\n  const element = (\n    <Modal isOpen={visible} style={customStyles}>\n      <div onClick={close}>\n        <img\n          style={{ position: \"absolute\", top: \"1rem\", right: \"1rem\" }}\n          src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAADKADAAQAAAABAAAADAAAAAATDPpdAAAAmklEQVQoFZWRwQ3DIAwAa4brJPBP80hnaD/lD5N0iYxEfRVBxBGRwsvgO2PZklJaReTrvX/eTk7O+VVKuTtgDRYVPyOeHAysAFV40jCGEB69aHN/YSRZGK4JVuKu5/DrToDoqnI9tOh4vXJ2Qlc96kSY2lTfWs0m9DCT0r3MSkUrXR9r3eBCNbuDrY/td23z7Vg3wQhGIgcD+wPGY2fPvHuWagAAAABJRU5ErkJggg==\"\n        />\n      </div>\n      <div\n        style={{\n          width: \"35rem\",\n          padding: 18,\n          flex: 1,\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          color: \"#002237\",\n        }}\n      >\n        {renderPannel(mode)}\n      </div>\n    </Modal>\n  );\n  return [\n    element,\n    {\n      play: (data, options) => {\n        return new Promise<PlayStatus>((resolve) => {\n          ee.once(\"close\", () => {\n            resolve(PlayStatus.canceled);\n          });\n          setVisible(true);\n          setMode(\"play\");\n          play(data, options).then(() => {\n            reset();\n            resolve(PlayStatus.success);\n          });\n        });\n      },\n      read: async (expect, options) => {\n        return new Promise((resolve) => {\n          ee.once(\"close\", () => {\n            reset();\n            resolve({\n              status: ReadStatus.canceled,\n            });\n          });\n          if (options.renderInitial) {\n            setWalltMode(options.renderInitial.walletMode);\n            setLink(options.renderInitial.link);\n            setMode(\"initial\");\n            setVisible(true);\n            read(expect, options).then((result) => {\n              reset();\n              resolve(result);\n            });\n          } else {\n            setMode(\"read\");\n            setVisible(true);\n            read(expect, options).then((result) => {\n              reset();\n              resolve(result);\n            });\n          }\n        });\n      },\n      cameraReady,\n    },\n  ];\n};\n","import { setupSdk } from \"./service\";\nimport { useController } from \"./hooks/useController\";\n\nexport default () => {\n  const [Controller, { read, play, cameraReady }] = useController();\n  setupSdk(read, play, cameraReady);\n  return Controller;\n};\n","import ReactDOM from \"react-dom\";\nimport Root from \"./Root\";\nimport React from \"react\";\nimport { Play, Read } from \"./types\";\nimport Modal from \"react-modal\";\n\nlet initialized = false;\nlet read: Read;\nlet play: Play;\nlet cameraReady: boolean;\n\nconst bootstrap = (): void => {\n  const htmlBody = document\n    .getElementsByTagName(\"body\")\n    .item(0) as HTMLBodyElement;\n  const sdkDiv = document.createElement(\"div\");\n  sdkDiv.id = \"kv_sdk_container\";\n  htmlBody.appendChild(sdkDiv);\n  Modal.setAppElement(\"#kv_sdk_container\");\n  ReactDOM.render(React.createElement(Root), sdkDiv);\n};\n\nexport const setupSdk = (r: Read, p: Play, status: boolean) => {\n  initialized = true;\n  read = r;\n  play = p;\n  cameraReady = status;\n};\n\nconst sdk = {\n  bootstrap,\n  getSdk: () => {\n    if (initialized) {\n      return {\n        read,\n        play,\n        cameraReady,\n      };\n    } else {\n      throw new Error(\"SDK is not initialized\");\n    }\n  },\n};\n\nexport default sdk;\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}