{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createDisableRequiredMemoTransfersInstruction = exports.createEnableRequiredMemoTransfersInstruction = exports.memoTransferInstructionData = exports.MemoTransferInstruction = void 0;\nvar buffer_layout_1 = require(\"@solana/buffer-layout\");\nvar web3_js_1 = require(\"@solana/web3.js\");\nvar constants_js_1 = require(\"../../constants.js\");\nvar errors_js_1 = require(\"../../errors.js\");\nvar types_js_1 = require(\"../../instructions/types.js\");\nvar MemoTransferInstruction;\n(function (MemoTransferInstruction) {\n  MemoTransferInstruction[MemoTransferInstruction[\"Enable\"] = 0] = \"Enable\";\n  MemoTransferInstruction[MemoTransferInstruction[\"Disable\"] = 1] = \"Disable\";\n})(MemoTransferInstruction = exports.MemoTransferInstruction || (exports.MemoTransferInstruction = {}));\n/** TODO: docs */\nexports.memoTransferInstructionData = (0, buffer_layout_1.struct)([(0, buffer_layout_1.u8)('instruction'), (0, buffer_layout_1.u8)('memoTransferInstruction')]);\n/**\n * Construct an EnableRequiredMemoTransfers instruction\n *\n * @param account         Token account to update\n * @param authority       The account's owner/delegate\n * @param signers         The signer account(s)\n * @param programId       SPL Token program account\n *\n * @return Instruction to add to a transaction\n */\nfunction createEnableRequiredMemoTransfersInstruction(account, authority) {\n  var multiSigners = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var programId = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : constants_js_1.TOKEN_2022_PROGRAM_ID;\n  return createMemoTransferInstruction( /* enable */true, account, authority, multiSigners, programId);\n}\nexports.createEnableRequiredMemoTransfersInstruction = createEnableRequiredMemoTransfersInstruction;\n/**\n * Construct a DisableMemoTransfer instruction\n *\n * @param account         Token account to update\n * @param authority       The account's owner/delegate\n * @param signers         The signer account(s)\n * @param programId       SPL Token program account\n *\n * @return Instruction to add to a transaction\n */\nfunction createDisableRequiredMemoTransfersInstruction(account, authority) {\n  var multiSigners = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var programId = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : constants_js_1.TOKEN_2022_PROGRAM_ID;\n  return createMemoTransferInstruction( /* enable */false, account, authority, multiSigners, programId);\n}\nexports.createDisableRequiredMemoTransfersInstruction = createDisableRequiredMemoTransfersInstruction;\nfunction createMemoTransferInstruction(enable, account, authority, multiSigners, programId) {\n  if (!(0, constants_js_1.programSupportsExtensions)(programId)) {\n    throw new errors_js_1.TokenUnsupportedInstructionError();\n  }\n  var keys = [{\n    pubkey: account,\n    isSigner: false,\n    isWritable: true\n  }];\n  keys.push({\n    pubkey: authority,\n    isSigner: !multiSigners.length,\n    isWritable: false\n  });\n  var _iterator = _createForOfIteratorHelper(multiSigners),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var signer = _step.value;\n      keys.push({\n        pubkey: signer.publicKey,\n        isSigner: true,\n        isWritable: false\n      });\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  var data = Buffer.alloc(exports.memoTransferInstructionData.span);\n  exports.memoTransferInstructionData.encode({\n    instruction: types_js_1.TokenInstruction.MemoTransferExtension,\n    memoTransferInstruction: enable ? MemoTransferInstruction.Enable : MemoTransferInstruction.Disable\n  }, data);\n  return new web3_js_1.TransactionInstruction({\n    keys: keys,\n    programId: programId,\n    data: data\n  });\n}","map":{"version":3,"mappings":";;;;;;;AAAA;AAEA;AACA;AACA;AACA;AAEA,IAAYA,uBAGX;AAHD,WAAYA,uBAAuB;EAC/BA,yEAAU;EACVA,2EAAW;AACf,CAAC,EAHWA,uBAAuB,GAAvBC,+BAAuB,KAAvBA,+BAAuB;AAWnC;AACaA,mCAA2B,GAAG,0BAAM,EAA8B,CAC3E,sBAAE,EAAC,aAAa,CAAC,EACjB,sBAAE,EAAC,yBAAyB,CAAC,CAChC,CAAC;AAEF;;;;;;;;;;AAUA,SAAgBC,4CAA4C,CACxDC,OAAkB,EAClBC,SAAoB,EAEa;EAAA,IADjCC,mFAAyB,EAAE;EAAA,IAC3BC,SAAS,uEAAGC,oCAAqB;EAEjC,OAAOC,6BAA6B,EAAC,YAAa,IAAI,EAAEL,OAAO,EAAEC,SAAS,EAAEC,YAAY,EAAEC,SAAS,CAAC;AACxG;AAPAL;AASA;;;;;;;;;;AAUA,SAAgBQ,6CAA6C,CACzDN,OAAkB,EAClBC,SAAoB,EAEa;EAAA,IADjCC,mFAAyB,EAAE;EAAA,IAC3BC,SAAS,uEAAGC,oCAAqB;EAEjC,OAAOC,6BAA6B,EAAC,YAAa,KAAK,EAAEL,OAAO,EAAEC,SAAS,EAAEC,YAAY,EAAEC,SAAS,CAAC;AACzG;AAPAL;AASA,SAASO,6BAA6B,CAClCE,MAAe,EACfP,OAAkB,EAClBC,SAAoB,EACpBC,YAAsB,EACtBC,SAAoB;EAEpB,IAAI,CAAC,4CAAyB,EAACA,SAAS,CAAC,EAAE;IACvC,MAAM,IAAIK,4CAAgC,EAAE;;EAEhD,IAAMC,IAAI,GAAG,CAAC;IAAEC,MAAM,EAAEV,OAAO;IAAEW,QAAQ,EAAE,KAAK;IAAEC,UAAU,EAAE;EAAI,CAAE,CAAC;EACrEH,IAAI,CAACI,IAAI,CAAC;IAAEH,MAAM,EAAET,SAAS;IAAEU,QAAQ,EAAE,CAACT,YAAY,CAACY,MAAM;IAAEF,UAAU,EAAE;EAAK,CAAE,CAAC;EAAC,2CAC/DV,YAAY;IAAA;EAAA;IAAjC,oDAAmC;MAAA,IAAxBa,MAAM;MACbN,IAAI,CAACI,IAAI,CAAC;QAAEH,MAAM,EAAEK,MAAM,CAACC,SAAS;QAAEL,QAAQ,EAAE,IAAI;QAAEC,UAAU,EAAE;MAAK,CAAE,CAAC;;EAC7E;IAAA;EAAA;IAAA;EAAA;EAED,IAAMK,IAAI,GAAGC,MAAM,CAACC,KAAK,CAACrB,mCAA2B,CAACsB,IAAI,CAAC;EAC3DtB,mCAA2B,CAACuB,MAAM,CAC9B;IACIC,WAAW,EAAEC,2BAAgB,CAACC,qBAAqB;IACnDC,uBAAuB,EAAElB,MAAM,GAAGV,uBAAuB,CAAC6B,MAAM,GAAG7B,uBAAuB,CAAC8B;GAC9F,EACDV,IAAI,CACP;EAED,OAAO,IAAIW,gCAAsB,CAAC;IAAEnB,IAAI,EAAJA,IAAI;IAAEN,SAAS,EAATA,SAAS;IAAEc,IAAI,EAAJA;EAAI,CAAE,CAAC;AAChE","names":["MemoTransferInstruction","exports","createEnableRequiredMemoTransfersInstruction","account","authority","multiSigners","programId","constants_js_1","createMemoTransferInstruction","createDisableRequiredMemoTransfersInstruction","enable","errors_js_1","keys","pubkey","isSigner","isWritable","push","length","signer","publicKey","data","Buffer","alloc","span","encode","instruction","types_js_1","MemoTransferExtension","memoTransferInstruction","Enable","Disable","web3_js_1"],"sources":["/Users/ivan/Metadata/node_modules/@solana/spl-token/src/extensions/memoTransfer/instructions.ts"],"sourcesContent":["import { struct, u8 } from '@solana/buffer-layout';\nimport type { PublicKey, Signer } from '@solana/web3.js';\nimport { TransactionInstruction } from '@solana/web3.js';\nimport { programSupportsExtensions, TOKEN_2022_PROGRAM_ID } from '../../constants.js';\nimport { TokenUnsupportedInstructionError } from '../../errors.js';\nimport { TokenInstruction } from '../../instructions/types.js';\n\nexport enum MemoTransferInstruction {\n    Enable = 0,\n    Disable = 1,\n}\n\n/** TODO: docs */\nexport interface MemoTransferInstructionData {\n    instruction: TokenInstruction.MemoTransferExtension;\n    memoTransferInstruction: MemoTransferInstruction;\n}\n\n/** TODO: docs */\nexport const memoTransferInstructionData = struct<MemoTransferInstructionData>([\n    u8('instruction'),\n    u8('memoTransferInstruction'),\n]);\n\n/**\n * Construct an EnableRequiredMemoTransfers instruction\n *\n * @param account         Token account to update\n * @param authority       The account's owner/delegate\n * @param signers         The signer account(s)\n * @param programId       SPL Token program account\n *\n * @return Instruction to add to a transaction\n */\nexport function createEnableRequiredMemoTransfersInstruction(\n    account: PublicKey,\n    authority: PublicKey,\n    multiSigners: Signer[] = [],\n    programId = TOKEN_2022_PROGRAM_ID\n): TransactionInstruction {\n    return createMemoTransferInstruction(/* enable */ true, account, authority, multiSigners, programId);\n}\n\n/**\n * Construct a DisableMemoTransfer instruction\n *\n * @param account         Token account to update\n * @param authority       The account's owner/delegate\n * @param signers         The signer account(s)\n * @param programId       SPL Token program account\n *\n * @return Instruction to add to a transaction\n */\nexport function createDisableRequiredMemoTransfersInstruction(\n    account: PublicKey,\n    authority: PublicKey,\n    multiSigners: Signer[] = [],\n    programId = TOKEN_2022_PROGRAM_ID\n): TransactionInstruction {\n    return createMemoTransferInstruction(/* enable */ false, account, authority, multiSigners, programId);\n}\n\nfunction createMemoTransferInstruction(\n    enable: boolean,\n    account: PublicKey,\n    authority: PublicKey,\n    multiSigners: Signer[],\n    programId: PublicKey\n): TransactionInstruction {\n    if (!programSupportsExtensions(programId)) {\n        throw new TokenUnsupportedInstructionError();\n    }\n    const keys = [{ pubkey: account, isSigner: false, isWritable: true }];\n    keys.push({ pubkey: authority, isSigner: !multiSigners.length, isWritable: false });\n    for (const signer of multiSigners) {\n        keys.push({ pubkey: signer.publicKey, isSigner: true, isWritable: false });\n    }\n\n    const data = Buffer.alloc(memoTransferInstructionData.span);\n    memoTransferInstructionData.encode(\n        {\n            instruction: TokenInstruction.MemoTransferExtension,\n            memoTransferInstruction: enable ? MemoTransferInstruction.Enable : MemoTransferInstruction.Disable,\n        },\n        data\n    );\n\n    return new TransactionInstruction({ keys, programId, data });\n}\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}