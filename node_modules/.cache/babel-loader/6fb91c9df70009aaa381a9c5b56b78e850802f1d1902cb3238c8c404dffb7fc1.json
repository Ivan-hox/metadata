{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { BaseMessageSignerWalletAdapter, WalletAccountError, WalletLoadError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSignTransactionError } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nexport var KeystoneWalletName = 'Keystone';\nexport var KeystoneWalletAdapter = /*#__PURE__*/function (_BaseMessageSignerWal) {\n  _inherits(KeystoneWalletAdapter, _BaseMessageSignerWal);\n  var _super = _createSuper(KeystoneWalletAdapter);\n  function KeystoneWalletAdapter() {\n    var _this;\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, KeystoneWalletAdapter);\n    _this = _super.call(this);\n    _this.name = KeystoneWalletName;\n    _this.url = 'https://keyst.one';\n    _this.icon = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE2IiBmaWxsPSJ3aGl0ZSIvPgogICAgPHJlY3QgeD0iNSIgeT0iNSIgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiBmaWxsPSJ3aGl0ZSIgZmlsbC1vcGFjaXR5PSIxIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE0LjY5NjUgNS40MzQ4N0MxNS4wOTEgNC43NTMxNiAxNi4wNzQ5IDQuNzUyMTEgMTYuNDcwOCA1LjQzMjk5TDE3LjMzOTggNi45MjcxOUMxNy42NDkgNy40NTg5NiAxNy42NDg3IDguMTE1ODggMTcuMzM4OSA4LjY0NzM0TDkuNjMxMjEgMjEuODcxQzkuMjE4NTEgMjIuNTc5MSA4LjE5NjIzIDIyLjU4MTEgNy43ODA3NiAyMS44NzQ2QzcuNzMxMzIgMjEuNzkwNiA3LjY5MzU4IDIxLjcwMDEgNy42Njg1OCAyMS42MDU4TDcuMzcwODggMjAuNDgyOUM3LjA5MjY2IDE5LjQzMzQgNy4yNDE4IDE4LjMxNjQgNy43ODU2MyAxNy4zNzY3TDE0LjY5NjUgNS40MzQ4N1pNMTIuNjYzNiAxOS4yODU4QzEzLjA2MzUgMTguNTk5NyAxNC4wMDM1IDE4LjQ3NTcgMTQuNTY3NyAxOS4wMzQ1TDE3LjQyODggMjEuODY4NkMxOC44NjA1IDIzLjI4NjcgMTguODU2NSAyNS42MDE2IDE3LjQyIDI3LjAxNDlDMTcuMjA0NSAyNy4yMjY5IDE2Ljg3OTggMjcuMjgyNSAxNi42MDYgMjcuMTU0MkwxMS42MDAyIDI0LjgwODFDMTAuNjkwNyAyNC4zODE5IDEwLjM0MyAyMy4yNjcxIDEwLjg0ODcgMjIuMzk5NEwxMi42NjM2IDE5LjI4NThaTTIwLjQzNSAxNi4zMzcyQzIxLjQ4OTcgMTYuMzM3MiAyMi4xNDc0IDE1LjE5MzkgMjEuNjE3MiAxNC4yODIyTDE5Ljc4MjggMTEuMTI4QzE5LjI1NTggMTAuMjIxOCAxNy45NDcxIDEwLjIyMTIgMTcuNDE5MiAxMS4xMjY5TDE1LjQzMDkgMTQuNTM4MUMxNC45NjYgMTUuMzM1OCAxNS41NDE0IDE2LjMzNzIgMTYuNDY0NyAxNi4zMzcyTDIwLjQzNSAxNi4zMzcyWiIgZmlsbD0iYmxhY2siLz4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjEuNzMwMyAxNy42NDU5QzIyLjg3MTMgMTcuNjQ1OSAyMy45MjYxIDE4LjI1MjcgMjQuNDk5OCAxOS4yMzlWMTkuMjM5QzI0LjY3NjMgMTkuNTQyNyAyNC42MjQ3IDE5LjkyNzQgMjQuMzc0MyAyMC4xNzM3TDIyLjA1MTEgMjIuNDU5QzIxLjQ1MDkgMjMuMDQ5NCAyMC40ODc3IDIzLjA0NzggMTkuODg5NSAyMi40NTUzTDE2LjUxMDEgMTkuMTA3OEMxNS45Njc3IDE4LjU3MDYgMTYuMzQ4MSAxNy42NDU5IDE3LjExMTYgMTcuNjQ1OUwyMS43MzAzIDE3LjY0NTlaIiBmaWxsPSIjMjE2MUZGIi8+Cjwvc3ZnPgo=';\n    _this.supportedTransactionVersions = null;\n    _this._readyState = typeof window === 'undefined' || typeof document === 'undefined' ? WalletReadyState.Unsupported : WalletReadyState.Loadable;\n    _this._keyring = null;\n    _this._publicKey = null;\n    _this._connecting = false;\n    return _this;\n  }\n  _createClass(KeystoneWalletAdapter, [{\n    key: \"publicKey\",\n    get: function get() {\n      return this._publicKey;\n    }\n  }, {\n    key: \"connecting\",\n    get: function get() {\n      return this._connecting;\n    }\n  }, {\n    key: \"readyState\",\n    get: function get() {\n      return this._readyState;\n    }\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var keyring, _yield$import, DefaultKeyring, account, publicKey;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                if (!(this.connected || this.connecting)) {\n                  _context.next = 3;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 3:\n                if (!(this._readyState !== WalletReadyState.Loadable)) {\n                  _context.next = 5;\n                  break;\n                }\n                throw new WalletNotReadyError();\n              case 5:\n                this._connecting = true;\n                _context.prev = 6;\n                _context.next = 9;\n                return import('@keystonehq/sol-keyring');\n              case 9:\n                _yield$import = _context.sent;\n                DefaultKeyring = _yield$import.DefaultKeyring;\n                keyring = DefaultKeyring.getEmptyKeyring();\n                _context.next = 17;\n                break;\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](6);\n                throw new WalletLoadError(_context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.message, _context.t0);\n              case 17:\n                _context.prev = 17;\n                _context.next = 20;\n                return keyring.readKeyring();\n              case 20:\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                account = keyring.getAccounts()[0].pubKey;\n                _context.next = 26;\n                break;\n              case 23:\n                _context.prev = 23;\n                _context.t1 = _context[\"catch\"](17);\n                throw new WalletAccountError(_context.t1 === null || _context.t1 === void 0 ? void 0 : _context.t1.message, _context.t1);\n              case 26:\n                _context.prev = 26;\n                publicKey = new PublicKey(account);\n                _context.next = 33;\n                break;\n              case 30:\n                _context.prev = 30;\n                _context.t2 = _context[\"catch\"](26);\n                throw new WalletPublicKeyError(_context.t2 === null || _context.t2 === void 0 ? void 0 : _context.t2.message, _context.t2);\n              case 33:\n                this._keyring = keyring;\n                this._publicKey = publicKey;\n                this.emit('connect', publicKey);\n                _context.next = 42;\n                break;\n              case 38:\n                _context.prev = 38;\n                _context.t3 = _context[\"catch\"](0);\n                this.emit('error', _context.t3);\n                throw _context.t3;\n              case 42:\n                _context.prev = 42;\n                this._connecting = false;\n                return _context.finish(42);\n              case 45:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 38, 42, 45], [6, 14], [17, 23], [26, 30]]);\n      }));\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n      return connect;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this._keyring) {\n                  this._keyring = null;\n                  this._publicKey = null;\n                }\n                this.emit('disconnect');\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n      return disconnect;\n    }()\n  }, {\n    key: \"signTransaction\",\n    value: function () {\n      var _signTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(transaction) {\n        var _this$_publicKey, keyring, publicKey;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                keyring = this._keyring;\n                publicKey = (_this$_publicKey = this._publicKey) === null || _this$_publicKey === void 0 ? void 0 : _this$_publicKey.toString();\n                if (!(!keyring || !publicKey)) {\n                  _context3.next = 5;\n                  break;\n                }\n                throw new WalletNotConnectedError();\n              case 5:\n                _context3.prev = 5;\n                _context3.next = 8;\n                return keyring.signTransaction(publicKey, transaction);\n              case 8:\n                return _context3.abrupt(\"return\", _context3.sent);\n              case 11:\n                _context3.prev = 11;\n                _context3.t0 = _context3[\"catch\"](5);\n                throw new WalletSignTransactionError(_context3.t0 === null || _context3.t0 === void 0 ? void 0 : _context3.t0.message, _context3.t0);\n              case 14:\n                _context3.next = 20;\n                break;\n              case 16:\n                _context3.prev = 16;\n                _context3.t1 = _context3[\"catch\"](0);\n                this.emit('error', _context3.t1);\n                throw _context3.t1;\n              case 20:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 16], [5, 11]]);\n      }));\n      function signTransaction(_x) {\n        return _signTransaction.apply(this, arguments);\n      }\n      return signTransaction;\n    }()\n  }, {\n    key: \"signMessage\",\n    value: function () {\n      var _signMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(message) {\n        var _this$_publicKey2, keyring, publicKey;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                keyring = this._keyring;\n                publicKey = (_this$_publicKey2 = this._publicKey) === null || _this$_publicKey2 === void 0 ? void 0 : _this$_publicKey2.toString();\n                if (!(!keyring || !publicKey)) {\n                  _context4.next = 5;\n                  break;\n                }\n                throw new WalletNotConnectedError();\n              case 5:\n                _context4.prev = 5;\n                return _context4.abrupt(\"return\", keyring.signMessage(publicKey, message));\n              case 9:\n                _context4.prev = 9;\n                _context4.t0 = _context4[\"catch\"](5);\n                throw new WalletSignTransactionError(_context4.t0 === null || _context4.t0 === void 0 ? void 0 : _context4.t0.message, _context4.t0);\n              case 12:\n                _context4.next = 18;\n                break;\n              case 14:\n                _context4.prev = 14;\n                _context4.t1 = _context4[\"catch\"](0);\n                this.emit('error', _context4.t1);\n                throw _context4.t1;\n              case 18:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 14], [5, 9]]);\n      }));\n      function signMessage(_x2) {\n        return _signMessage.apply(this, arguments);\n      }\n      return signMessage;\n    }()\n  }]);\n  return KeystoneWalletAdapter;\n}(BaseMessageSignerWalletAdapter);","map":{"version":3,"mappings":"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","names":["BaseMessageSignerWalletAdapter","WalletAccountError","WalletLoadError","WalletNotConnectedError","WalletNotReadyError","WalletPublicKeyError","WalletReadyState","WalletSignTransactionError","PublicKey","KeystoneWalletName","KeystoneWalletAdapter","config","window","document","Unsupported","Loadable","_keyring","_publicKey","_connecting","_readyState","connected","connecting","DefaultKeyring","keyring","getEmptyKeyring","message","readKeyring","account","getAccounts","pubKey","publicKey","emit","transaction","toString","signTransaction","signMessage"],"sources":["/Users/ivan/Metadata/node_modules/@solana/wallet-adapter-keystone/src/adapter.ts"],"sourcesContent":["import type { DefaultKeyring } from '@keystonehq/sol-keyring';\nimport type { WalletName } from '@solana/wallet-adapter-base';\nimport {\n    BaseMessageSignerWalletAdapter,\n    WalletAccountError,\n    WalletLoadError,\n    WalletNotConnectedError,\n    WalletNotReadyError,\n    WalletPublicKeyError,\n    WalletReadyState,\n    WalletSignTransactionError,\n} from '@solana/wallet-adapter-base';\nimport type { Transaction } from '@solana/web3.js';\nimport { PublicKey } from '@solana/web3.js';\n\nexport interface KeystoneWalletAdapterConfig {}\n\nexport const KeystoneWalletName = 'Keystone' as WalletName<'Keystone'>;\n\nexport class KeystoneWalletAdapter extends BaseMessageSignerWalletAdapter {\n    name = KeystoneWalletName;\n    url = 'https://keyst.one';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE2IiBmaWxsPSJ3aGl0ZSIvPgogICAgPHJlY3QgeD0iNSIgeT0iNSIgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiBmaWxsPSJ3aGl0ZSIgZmlsbC1vcGFjaXR5PSIxIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE0LjY5NjUgNS40MzQ4N0MxNS4wOTEgNC43NTMxNiAxNi4wNzQ5IDQuNzUyMTEgMTYuNDcwOCA1LjQzMjk5TDE3LjMzOTggNi45MjcxOUMxNy42NDkgNy40NTg5NiAxNy42NDg3IDguMTE1ODggMTcuMzM4OSA4LjY0NzM0TDkuNjMxMjEgMjEuODcxQzkuMjE4NTEgMjIuNTc5MSA4LjE5NjIzIDIyLjU4MTEgNy43ODA3NiAyMS44NzQ2QzcuNzMxMzIgMjEuNzkwNiA3LjY5MzU4IDIxLjcwMDEgNy42Njg1OCAyMS42MDU4TDcuMzcwODggMjAuNDgyOUM3LjA5MjY2IDE5LjQzMzQgNy4yNDE4IDE4LjMxNjQgNy43ODU2MyAxNy4zNzY3TDE0LjY5NjUgNS40MzQ4N1pNMTIuNjYzNiAxOS4yODU4QzEzLjA2MzUgMTguNTk5NyAxNC4wMDM1IDE4LjQ3NTcgMTQuNTY3NyAxOS4wMzQ1TDE3LjQyODggMjEuODY4NkMxOC44NjA1IDIzLjI4NjcgMTguODU2NSAyNS42MDE2IDE3LjQyIDI3LjAxNDlDMTcuMjA0NSAyNy4yMjY5IDE2Ljg3OTggMjcuMjgyNSAxNi42MDYgMjcuMTU0MkwxMS42MDAyIDI0LjgwODFDMTAuNjkwNyAyNC4zODE5IDEwLjM0MyAyMy4yNjcxIDEwLjg0ODcgMjIuMzk5NEwxMi42NjM2IDE5LjI4NThaTTIwLjQzNSAxNi4zMzcyQzIxLjQ4OTcgMTYuMzM3MiAyMi4xNDc0IDE1LjE5MzkgMjEuNjE3MiAxNC4yODIyTDE5Ljc4MjggMTEuMTI4QzE5LjI1NTggMTAuMjIxOCAxNy45NDcxIDEwLjIyMTIgMTcuNDE5MiAxMS4xMjY5TDE1LjQzMDkgMTQuNTM4MUMxNC45NjYgMTUuMzM1OCAxNS41NDE0IDE2LjMzNzIgMTYuNDY0NyAxNi4zMzcyTDIwLjQzNSAxNi4zMzcyWiIgZmlsbD0iYmxhY2siLz4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjEuNzMwMyAxNy42NDU5QzIyLjg3MTMgMTcuNjQ1OSAyMy45MjYxIDE4LjI1MjcgMjQuNDk5OCAxOS4yMzlWMTkuMjM5QzI0LjY3NjMgMTkuNTQyNyAyNC42MjQ3IDE5LjkyNzQgMjQuMzc0MyAyMC4xNzM3TDIyLjA1MTEgMjIuNDU5QzIxLjQ1MDkgMjMuMDQ5NCAyMC40ODc3IDIzLjA0NzggMTkuODg5NSAyMi40NTUzTDE2LjUxMDEgMTkuMTA3OEMxNS45Njc3IDE4LjU3MDYgMTYuMzQ4MSAxNy42NDU5IDE3LjExMTYgMTcuNjQ1OUwyMS43MzAzIDE3LjY0NTlaIiBmaWxsPSIjMjE2MUZGIi8+Cjwvc3ZnPgo=';\n    readonly supportedTransactionVersions = null;\n\n    private _keyring: DefaultKeyring | null;\n    private _publicKey: PublicKey | null;\n    private _connecting: boolean;\n    private _readyState: WalletReadyState =\n        typeof window === 'undefined' || typeof document === 'undefined'\n            ? WalletReadyState.Unsupported\n            : WalletReadyState.Loadable;\n\n    get publicKey() {\n        return this._publicKey;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    get readyState() {\n        return this._readyState;\n    }\n\n    constructor(config: KeystoneWalletAdapterConfig = {}) {\n        super();\n        this._keyring = null;\n        this._publicKey = null;\n        this._connecting = false;\n    }\n\n    async connect(): Promise<void> {\n        try {\n            if (this.connected || this.connecting) return;\n            if (this._readyState !== WalletReadyState.Loadable) throw new WalletNotReadyError();\n\n            this._connecting = true;\n\n            let keyring: DefaultKeyring;\n            try {\n                const { DefaultKeyring } = await import('@keystonehq/sol-keyring');\n                keyring = DefaultKeyring.getEmptyKeyring();\n            } catch (error: any) {\n                throw new WalletLoadError(error?.message, error);\n            }\n\n            let account: string;\n            try {\n                await keyring.readKeyring();\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                account = keyring.getAccounts()[0]!.pubKey;\n            } catch (error: any) {\n                throw new WalletAccountError(error?.message, error);\n            }\n\n            let publicKey: PublicKey;\n            try {\n                publicKey = new PublicKey(account);\n            } catch (error: any) {\n                throw new WalletPublicKeyError(error?.message, error);\n            }\n\n            this._keyring = keyring;\n            this._publicKey = publicKey;\n            this.emit('connect', publicKey);\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        if (this._keyring) {\n            this._keyring = null;\n            this._publicKey = null;\n        }\n\n        this.emit('disconnect');\n    }\n\n    async signTransaction<T extends Transaction>(transaction: T): Promise<T> {\n        try {\n            const keyring = this._keyring;\n            const publicKey = this._publicKey?.toString();\n            if (!keyring || !publicKey) throw new WalletNotConnectedError();\n\n            try {\n                return (await keyring.signTransaction(publicKey, transaction)) as T;\n            } catch (error: any) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: Uint8Array): Promise<Uint8Array> {\n        try {\n            const keyring = this._keyring;\n            const publicKey = this._publicKey?.toString();\n            if (!keyring || !publicKey) throw new WalletNotConnectedError();\n\n            try {\n                return keyring.signMessage(publicKey, message);\n            } catch (error: any) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}