{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { BaseMessageSignerWalletAdapter, scopePollingDetectionStrategy, WalletAccountError, WalletConnectionError, WalletDisconnectionError, WalletError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSignMessageError, WalletSignTransactionError } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nimport bs58 from 'bs58';\nexport var SlopeWalletName = 'Slope';\nexport var SlopeWalletAdapter = /*#__PURE__*/function (_BaseMessageSignerWal) {\n  _inherits(SlopeWalletAdapter, _BaseMessageSignerWal);\n  var _super = _createSuper(SlopeWalletAdapter);\n  function SlopeWalletAdapter() {\n    var _this;\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, SlopeWalletAdapter);\n    _this = _super.call(this);\n    _this.name = SlopeWalletName;\n    _this.url = 'https://slope.finance';\n    _this.icon = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iNjQiIGZpbGw9IiM2RTY2RkEiLz4KPHBhdGggZD0iTTI3Ljk0NzUgNTIuMTU5Nkw1MS45ODI2IDI4LjA1NzJMNzIuNjA5OCA3LjY1Mzg5QzczLjg3MzQgNi40MDQwMSA3Ni4wMTc4IDcuMjk5MSA3Ni4wMTc4IDkuMDc2NDJMNzYuMDE4NyA1Mi4xNTlMNTEuOTgzNiA3Ni4xMjY4TDI3Ljk0NzUgNTIuMTU5NloiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8zNzk1XzI1NTQzKSIvPgo8cGF0aCBkPSJNMTAwLjA1MyA3NS45OTNMNzYuMDE4IDUxLjk1OEw1MS45ODI5IDc1Ljk5MzFMNTEuOTgyOSAxMTguOTI0QzUxLjk4MjkgMTIwLjcwMyA1NC4xMzEyIDEyMS41OTcgNTUuMzkzNyAxMjAuMzQzTDEwMC4wNTMgNzUuOTkzWiIgZmlsbD0idXJsKCNwYWludDFfbGluZWFyXzM3OTVfMjU1NDMpIi8+CjxwYXRoIGQ9Ik0yNy45NDcgNTIuMTYwMUg0NC42ODM5QzQ4LjcxNDcgNTIuMTYwMSA1MS45ODIyIDU1LjQyNzYgNTEuOTgyMiA1OS40NTgzVjc2LjEyNjlIMzUuMjQ1M0MzMS4yMTQ2IDc2LjEyNjkgMjcuOTQ3IDcyLjg1OTQgMjcuOTQ3IDY4LjgyODdWNTIuMTYwMVoiIGZpbGw9IiNGMUYwRkYiLz4KPHBhdGggZD0iTTc2LjAxNzggNTIuMTYwMUg5Mi43NTQ3Qzk2Ljc4NTUgNTIuMTYwMSAxMDAuMDUzIDU1LjQyNzYgMTAwLjA1MyA1OS40NTgzVjc2LjEyNjlIODMuMzE2MUM3OS4yODU0IDc2LjEyNjkgNzYuMDE3OCA3Mi44NTk0IDc2LjAxNzggNjguODI4N1Y1Mi4xNjAxWiIgZmlsbD0iI0YxRjBGRiIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzM3OTVfMjU1NDMiIHgxPSI1MS45ODMxIiB5MT0iNy4wNzE1NSIgeDI9IjUxLjk4MzEiIHkyPSI3Ni4xMjY4IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNBOEFERkYiLz4KPHN0b3Agb2Zmc2V0PSIwLjY0ODU1NiIgc3RvcC1jb2xvcj0id2hpdGUiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyXzM3OTVfMjU1NDMiIHgxPSI3Ni4wMTgiIHkxPSI1MS45NTgiIHgyPSI3Ni4wMTgiIHkyPSIxMjAuOTI4IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIG9mZnNldD0iMC4yNjA3ODQiIHN0b3AtY29sb3I9IiNCNkJBRkYiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRTRFMkZGIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg==';\n    _this.supportedTransactionVersions = null;\n    _this._readyState = typeof window === 'undefined' || typeof document === 'undefined' ? WalletReadyState.Unsupported : WalletReadyState.NotDetected;\n    _this._connecting = false;\n    _this._wallet = null;\n    _this._publicKey = null;\n    if (_this._readyState !== WalletReadyState.Unsupported) {\n      scopePollingDetectionStrategy(function () {\n        if (typeof window.Slope === 'function' || window.slopeApp) {\n          _this._readyState = WalletReadyState.Installed;\n          _this.emit('readyStateChange', _this._readyState);\n          return true;\n        }\n        return false;\n      });\n    }\n    return _this;\n  }\n  _createClass(SlopeWalletAdapter, [{\n    key: \"publicKey\",\n    get: function get() {\n      return this._publicKey;\n    }\n  }, {\n    key: \"connecting\",\n    get: function get() {\n      return this._connecting;\n    }\n  }, {\n    key: \"readyState\",\n    get: function get() {\n      return this._readyState;\n    }\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var wallet, data, _yield$wallet$connect, publicKey;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                if (!(this.connected || this.connecting)) {\n                  _context.next = 3;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 3:\n                if (!(this._readyState !== WalletReadyState.Installed || typeof window.Slope !== 'function')) {\n                  _context.next = 5;\n                  break;\n                }\n                throw new WalletNotReadyError();\n              case 5:\n                this._connecting = true;\n                wallet = new window.Slope();\n                _context.prev = 7;\n                _context.next = 10;\n                return wallet.connect();\n              case 10:\n                _yield$wallet$connect = _context.sent;\n                data = _yield$wallet$connect.data;\n                _context.next = 17;\n                break;\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](7);\n                throw new WalletConnectionError(_context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.message, _context.t0);\n              case 17:\n                if (data.publicKey) {\n                  _context.next = 19;\n                  break;\n                }\n                throw new WalletAccountError();\n              case 19:\n                _context.prev = 19;\n                publicKey = new PublicKey(data.publicKey);\n                _context.next = 26;\n                break;\n              case 23:\n                _context.prev = 23;\n                _context.t1 = _context[\"catch\"](19);\n                throw new WalletPublicKeyError(_context.t1 === null || _context.t1 === void 0 ? void 0 : _context.t1.message, _context.t1);\n              case 26:\n                this._wallet = wallet;\n                this._publicKey = publicKey;\n                this.emit('connect', publicKey);\n                _context.next = 35;\n                break;\n              case 31:\n                _context.prev = 31;\n                _context.t2 = _context[\"catch\"](0);\n                this.emit('error', _context.t2);\n                throw _context.t2;\n              case 35:\n                _context.prev = 35;\n                this._connecting = false;\n                return _context.finish(35);\n              case 38:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 31, 35, 38], [7, 14], [19, 23]]);\n      }));\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n      return connect;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var wallet, msg, _yield$wallet$disconn;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                wallet = this._wallet;\n                if (!wallet) {\n                  _context2.next = 22;\n                  break;\n                }\n                this._wallet = null;\n                this._publicKey = null;\n                _context2.prev = 4;\n                _context2.prev = 5;\n                _context2.next = 8;\n                return wallet.disconnect();\n              case 8:\n                _yield$wallet$disconn = _context2.sent;\n                msg = _yield$wallet$disconn.msg;\n                _context2.next = 15;\n                break;\n              case 12:\n                _context2.prev = 12;\n                _context2.t0 = _context2[\"catch\"](5);\n                throw new WalletDisconnectionError(_context2.t0 === null || _context2.t0 === void 0 ? void 0 : _context2.t0.message, _context2.t0);\n              case 15:\n                if (!(msg !== 'ok')) {\n                  _context2.next = 17;\n                  break;\n                }\n                throw new WalletDisconnectionError(msg);\n              case 17:\n                _context2.next = 22;\n                break;\n              case 19:\n                _context2.prev = 19;\n                _context2.t1 = _context2[\"catch\"](4);\n                this.emit('error', _context2.t1);\n              case 22:\n                this.emit('disconnect');\n              case 23:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[4, 19], [5, 12]]);\n      }));\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n      return disconnect;\n    }()\n  }, {\n    key: \"signTransaction\",\n    value: function () {\n      var _signTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(transaction) {\n        var wallet, message, _yield$wallet$signTra, msg, data, publicKey, signature;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                wallet = this._wallet;\n                if (wallet) {\n                  _context3.next = 4;\n                  break;\n                }\n                throw new WalletNotConnectedError();\n              case 4:\n                _context3.prev = 4;\n                message = bs58.encode(transaction.serializeMessage());\n                _context3.next = 8;\n                return wallet.signTransaction(message);\n              case 8:\n                _yield$wallet$signTra = _context3.sent;\n                msg = _yield$wallet$signTra.msg;\n                data = _yield$wallet$signTra.data;\n                if (!(!data.publicKey || !data.signature)) {\n                  _context3.next = 13;\n                  break;\n                }\n                throw new WalletSignTransactionError(msg);\n              case 13:\n                publicKey = new PublicKey(data.publicKey);\n                signature = bs58.decode(data.signature);\n                transaction.addSignature(publicKey, signature);\n                return _context3.abrupt(\"return\", transaction);\n              case 19:\n                _context3.prev = 19;\n                _context3.t0 = _context3[\"catch\"](4);\n                if (!(_context3.t0 instanceof WalletError)) {\n                  _context3.next = 23;\n                  break;\n                }\n                throw _context3.t0;\n              case 23:\n                throw new WalletSignTransactionError(_context3.t0 === null || _context3.t0 === void 0 ? void 0 : _context3.t0.message, _context3.t0);\n              case 24:\n                _context3.next = 30;\n                break;\n              case 26:\n                _context3.prev = 26;\n                _context3.t1 = _context3[\"catch\"](0);\n                this.emit('error', _context3.t1);\n                throw _context3.t1;\n              case 30:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 26], [4, 19]]);\n      }));\n      function signTransaction(_x) {\n        return _signTransaction.apply(this, arguments);\n      }\n      return signTransaction;\n    }()\n  }, {\n    key: \"signAllTransactions\",\n    value: function () {\n      var _signAllTransactions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(transactions) {\n        var wallet, _data$signatures, messages, _yield$wallet$signAll, msg, data, length, publicKey, i;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                wallet = this._wallet;\n                if (wallet) {\n                  _context4.next = 4;\n                  break;\n                }\n                throw new WalletNotConnectedError();\n              case 4:\n                _context4.prev = 4;\n                messages = transactions.map(function (transaction) {\n                  return bs58.encode(transaction.serializeMessage());\n                });\n                _context4.next = 8;\n                return wallet.signAllTransactions(messages);\n              case 8:\n                _yield$wallet$signAll = _context4.sent;\n                msg = _yield$wallet$signAll.msg;\n                data = _yield$wallet$signAll.data;\n                length = transactions.length;\n                if (!(!data.publicKey || ((_data$signatures = data.signatures) === null || _data$signatures === void 0 ? void 0 : _data$signatures.length) !== length)) {\n                  _context4.next = 14;\n                  break;\n                }\n                throw new WalletSignTransactionError(msg);\n              case 14:\n                publicKey = new PublicKey(data.publicKey);\n                for (i = 0; i < length; i++) {\n                  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                  transactions[i].addSignature(publicKey, bs58.decode(data.signatures[i]));\n                }\n                return _context4.abrupt(\"return\", transactions);\n              case 19:\n                _context4.prev = 19;\n                _context4.t0 = _context4[\"catch\"](4);\n                if (!(_context4.t0 instanceof WalletError)) {\n                  _context4.next = 23;\n                  break;\n                }\n                throw _context4.t0;\n              case 23:\n                throw new WalletSignTransactionError(_context4.t0 === null || _context4.t0 === void 0 ? void 0 : _context4.t0.message, _context4.t0);\n              case 24:\n                _context4.next = 30;\n                break;\n              case 26:\n                _context4.prev = 26;\n                _context4.t1 = _context4[\"catch\"](0);\n                this.emit('error', _context4.t1);\n                throw _context4.t1;\n              case 30:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 26], [4, 19]]);\n      }));\n      function signAllTransactions(_x2) {\n        return _signAllTransactions.apply(this, arguments);\n      }\n      return signAllTransactions;\n    }()\n  }, {\n    key: \"signMessage\",\n    value: function () {\n      var _signMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(message) {\n        var wallet, response;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                wallet = this._wallet;\n                if (wallet) {\n                  _context5.next = 4;\n                  break;\n                }\n                throw new WalletNotConnectedError();\n              case 4:\n                _context5.prev = 4;\n                _context5.next = 7;\n                return wallet.signMessage(message);\n              case 7:\n                response = _context5.sent;\n                return _context5.abrupt(\"return\", bs58.decode(response.data.signature));\n              case 11:\n                _context5.prev = 11;\n                _context5.t0 = _context5[\"catch\"](4);\n                throw new WalletSignMessageError(_context5.t0 === null || _context5.t0 === void 0 ? void 0 : _context5.t0.message, _context5.t0);\n              case 14:\n                _context5.next = 20;\n                break;\n              case 16:\n                _context5.prev = 16;\n                _context5.t1 = _context5[\"catch\"](0);\n                this.emit('error', _context5.t1);\n                throw _context5.t1;\n              case 20:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[0, 16], [4, 11]]);\n      }));\n      function signMessage(_x3) {\n        return _signMessage.apply(this, arguments);\n      }\n      return signMessage;\n    }()\n  }]);\n  return SlopeWalletAdapter;\n}(BaseMessageSignerWalletAdapter);","map":{"version":3,"mappings":"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","names":["BaseMessageSignerWalletAdapter","scopePollingDetectionStrategy","WalletAccountError","WalletConnectionError","WalletDisconnectionError","WalletError","WalletNotConnectedError","WalletNotReadyError","WalletPublicKeyError","WalletReadyState","WalletSignMessageError","WalletSignTransactionError","PublicKey","bs58","SlopeWalletName","SlopeWalletAdapter","config","window","document","Unsupported","NotDetected","_connecting","_wallet","_publicKey","_readyState","Slope","slopeApp","Installed","emit","connected","connecting","wallet","connect","data","message","publicKey","disconnect","msg","transaction","encode","serializeMessage","signTransaction","signature","decode","addSignature","transactions","messages","map","signAllTransactions","length","signatures","i","signMessage","response"],"sources":["/Users/ivan/Metadata/node_modules/@solana/wallet-adapter-slope/src/adapter.ts"],"sourcesContent":["import type { WalletName } from '@solana/wallet-adapter-base';\nimport {\n    BaseMessageSignerWalletAdapter,\n    scopePollingDetectionStrategy,\n    WalletAccountError,\n    WalletConnectionError,\n    WalletDisconnectionError,\n    WalletError,\n    WalletNotConnectedError,\n    WalletNotReadyError,\n    WalletPublicKeyError,\n    WalletReadyState,\n    WalletSignMessageError,\n    WalletSignTransactionError,\n} from '@solana/wallet-adapter-base';\nimport type { Transaction } from '@solana/web3.js';\nimport { PublicKey } from '@solana/web3.js';\nimport bs58 from 'bs58';\n\ninterface SlopeWallet {\n    connect(): Promise<{\n        msg: string;\n        data: {\n            publicKey?: string;\n        };\n    }>;\n    disconnect(): Promise<{ msg: string }>;\n    signTransaction(message: string): Promise<{\n        msg: string;\n        data: {\n            publicKey?: string;\n            signature?: string;\n        };\n    }>;\n    signAllTransactions(messages: string[]): Promise<{\n        msg: string;\n        data: {\n            publicKey?: string;\n            signatures?: string[];\n        };\n    }>;\n    signMessage(message: Uint8Array): Promise<{ data: { signature: string } }>;\n}\n\ninterface SlopeWindow extends Window {\n    Slope?: {\n        new (): SlopeWallet;\n    };\n    slopeApp?: unknown;\n}\n\ndeclare const window: SlopeWindow;\n\nexport interface SlopeWalletAdapterConfig {}\n\nexport const SlopeWalletName = 'Slope' as WalletName<'Slope'>;\n\nexport class SlopeWalletAdapter extends BaseMessageSignerWalletAdapter {\n    name = SlopeWalletName;\n    url = 'https://slope.finance';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iNjQiIGZpbGw9IiM2RTY2RkEiLz4KPHBhdGggZD0iTTI3Ljk0NzUgNTIuMTU5Nkw1MS45ODI2IDI4LjA1NzJMNzIuNjA5OCA3LjY1Mzg5QzczLjg3MzQgNi40MDQwMSA3Ni4wMTc4IDcuMjk5MSA3Ni4wMTc4IDkuMDc2NDJMNzYuMDE4NyA1Mi4xNTlMNTEuOTgzNiA3Ni4xMjY4TDI3Ljk0NzUgNTIuMTU5NloiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8zNzk1XzI1NTQzKSIvPgo8cGF0aCBkPSJNMTAwLjA1MyA3NS45OTNMNzYuMDE4IDUxLjk1OEw1MS45ODI5IDc1Ljk5MzFMNTEuOTgyOSAxMTguOTI0QzUxLjk4MjkgMTIwLjcwMyA1NC4xMzEyIDEyMS41OTcgNTUuMzkzNyAxMjAuMzQzTDEwMC4wNTMgNzUuOTkzWiIgZmlsbD0idXJsKCNwYWludDFfbGluZWFyXzM3OTVfMjU1NDMpIi8+CjxwYXRoIGQ9Ik0yNy45NDcgNTIuMTYwMUg0NC42ODM5QzQ4LjcxNDcgNTIuMTYwMSA1MS45ODIyIDU1LjQyNzYgNTEuOTgyMiA1OS40NTgzVjc2LjEyNjlIMzUuMjQ1M0MzMS4yMTQ2IDc2LjEyNjkgMjcuOTQ3IDcyLjg1OTQgMjcuOTQ3IDY4LjgyODdWNTIuMTYwMVoiIGZpbGw9IiNGMUYwRkYiLz4KPHBhdGggZD0iTTc2LjAxNzggNTIuMTYwMUg5Mi43NTQ3Qzk2Ljc4NTUgNTIuMTYwMSAxMDAuMDUzIDU1LjQyNzYgMTAwLjA1MyA1OS40NTgzVjc2LjEyNjlIODMuMzE2MUM3OS4yODU0IDc2LjEyNjkgNzYuMDE3OCA3Mi44NTk0IDc2LjAxNzggNjguODI4N1Y1Mi4xNjAxWiIgZmlsbD0iI0YxRjBGRiIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzM3OTVfMjU1NDMiIHgxPSI1MS45ODMxIiB5MT0iNy4wNzE1NSIgeDI9IjUxLjk4MzEiIHkyPSI3Ni4xMjY4IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNBOEFERkYiLz4KPHN0b3Agb2Zmc2V0PSIwLjY0ODU1NiIgc3RvcC1jb2xvcj0id2hpdGUiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyXzM3OTVfMjU1NDMiIHgxPSI3Ni4wMTgiIHkxPSI1MS45NTgiIHgyPSI3Ni4wMTgiIHkyPSIxMjAuOTI4IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIG9mZnNldD0iMC4yNjA3ODQiIHN0b3AtY29sb3I9IiNCNkJBRkYiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRTRFMkZGIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg==';\n    readonly supportedTransactionVersions = null;\n\n    private _connecting: boolean;\n    private _wallet: SlopeWallet | null;\n    private _publicKey: PublicKey | null;\n    private _readyState: WalletReadyState =\n        typeof window === 'undefined' || typeof document === 'undefined'\n            ? WalletReadyState.Unsupported\n            : WalletReadyState.NotDetected;\n\n    constructor(config: SlopeWalletAdapterConfig = {}) {\n        super();\n        this._connecting = false;\n        this._wallet = null;\n        this._publicKey = null;\n\n        if (this._readyState !== WalletReadyState.Unsupported) {\n            scopePollingDetectionStrategy(() => {\n                if (typeof window.Slope === 'function' || window.slopeApp) {\n                    this._readyState = WalletReadyState.Installed;\n                    this.emit('readyStateChange', this._readyState);\n                    return true;\n                }\n                return false;\n            });\n        }\n    }\n\n    get publicKey() {\n        return this._publicKey;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    get readyState() {\n        return this._readyState;\n    }\n\n    async connect(): Promise<void> {\n        try {\n            if (this.connected || this.connecting) return;\n            if (this._readyState !== WalletReadyState.Installed || typeof window.Slope !== 'function')\n                throw new WalletNotReadyError();\n\n            this._connecting = true;\n\n            const wallet = new window.Slope();\n\n            let data: { publicKey?: string | undefined };\n            try {\n                ({ data } = await wallet.connect());\n            } catch (error: any) {\n                throw new WalletConnectionError(error?.message, error);\n            }\n\n            if (!data.publicKey) throw new WalletAccountError();\n\n            let publicKey: PublicKey;\n            try {\n                publicKey = new PublicKey(data.publicKey);\n            } catch (error: any) {\n                throw new WalletPublicKeyError(error?.message, error);\n            }\n\n            this._wallet = wallet;\n            this._publicKey = publicKey;\n\n            this.emit('connect', publicKey);\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        const wallet = this._wallet;\n        if (wallet) {\n            this._wallet = null;\n            this._publicKey = null;\n\n            try {\n                let msg: string;\n                try {\n                    ({ msg } = await wallet.disconnect());\n                } catch (error: any) {\n                    throw new WalletDisconnectionError(error?.message, error);\n                }\n                if (msg !== 'ok') throw new WalletDisconnectionError(msg);\n            } catch (error: any) {\n                this.emit('error', error);\n            }\n        }\n\n        this.emit('disconnect');\n    }\n\n    async signTransaction<T extends Transaction>(transaction: T): Promise<T> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                const message = bs58.encode(transaction.serializeMessage());\n                const { msg, data } = await wallet.signTransaction(message);\n\n                if (!data.publicKey || !data.signature) throw new WalletSignTransactionError(msg);\n\n                const publicKey = new PublicKey(data.publicKey);\n                const signature = bs58.decode(data.signature);\n\n                transaction.addSignature(publicKey, signature);\n                return transaction;\n            } catch (error: any) {\n                if (error instanceof WalletError) throw error;\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signAllTransactions<T extends Transaction>(transactions: T[]): Promise<T[]> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                const messages = transactions.map((transaction) => bs58.encode(transaction.serializeMessage()));\n                const { msg, data } = await wallet.signAllTransactions(messages);\n\n                const length = transactions.length;\n                if (!data.publicKey || data.signatures?.length !== length) throw new WalletSignTransactionError(msg);\n\n                const publicKey = new PublicKey(data.publicKey);\n\n                for (let i = 0; i < length; i++) {\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    transactions[i]!.addSignature(publicKey, bs58.decode(data.signatures[i]!));\n                }\n\n                return transactions;\n            } catch (error: any) {\n                if (error instanceof WalletError) throw error;\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: Uint8Array): Promise<Uint8Array> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                const response = await wallet.signMessage(message);\n                return bs58.decode(response.data.signature);\n            } catch (error: any) {\n                throw new WalletSignMessageError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}