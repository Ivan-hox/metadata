{"ast":null,"code":"import _slicedToArray from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _regeneratorRuntime from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _classCallCheck from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { BaseMessageSignerWalletAdapter, WalletReadyState, WalletPublicKeyError, WalletNotReadyError, WalletConnectionError, WalletDisconnectedError, WalletNotConnectedError, WalletSignTransactionError, WalletSendTransactionError, WalletSignMessageError } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nimport { transact as _transact } from '@solana-mobile/mobile-wallet-adapter-protocol-web3js';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction toUint8Array(base64EncodedByteArray) {\n  return new Uint8Array(window.atob(base64EncodedByteArray).split('').map(function (c) {\n    return c.charCodeAt(0);\n  }));\n}\nfunction getIsSupported() {\n  return typeof window !== 'undefined' && window.isSecureContext && typeof document !== 'undefined' && /android/i.test(navigator.userAgent);\n}\nvar SolanaMobileWalletAdapterWalletName = 'Mobile Wallet Adapter';\nvar SIGNATURE_LENGTH_IN_BYTES = 64;\nfunction getPublicKeyFromAddress(address) {\n  var publicKeyByteArray = toUint8Array(address);\n  return new PublicKey(publicKeyByteArray);\n}\nfunction isVersionedTransaction(transaction) {\n  return 'version' in transaction;\n}\nvar SolanaMobileWalletAdapter = /*#__PURE__*/function (_BaseMessageSignerWal) {\n  _inherits(SolanaMobileWalletAdapter, _BaseMessageSignerWal);\n  var _super = _createSuper(SolanaMobileWalletAdapter);\n  function SolanaMobileWalletAdapter(config) {\n    var _this;\n    _classCallCheck(this, SolanaMobileWalletAdapter);\n    _this = _super.call(this);\n    _this.supportedTransactionVersions = new Set(\n    // FIXME(#244): We can't actually know what versions are supported until we know which wallet we're talking to.\n    ['legacy', 0]);\n    _this.name = SolanaMobileWalletAdapterWalletName;\n    _this.url = 'https://solanamobile.com/wallets';\n    _this.icon = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==';\n    _this._connecting = false;\n    /**\n     * Every time the connection is recycled in some way (eg. `disconnect()` is called)\n     * increment this and use it to make sure that `transact` calls from the previous\n     * 'generation' don't continue to do work and throw exceptions.\n     */\n    _this._connectionGeneration = 0;\n    _this._readyState = getIsSupported() ? WalletReadyState.Loadable : WalletReadyState.Unsupported;\n    _this._authorizationResultCache = config.authorizationResultCache;\n    _this._addressSelector = config.addressSelector;\n    _this._appIdentity = config.appIdentity;\n    _this._cluster = config.cluster;\n    _this._onWalletNotFound = config.onWalletNotFound;\n    if (_this._readyState !== WalletReadyState.Unsupported) {\n      _this._authorizationResultCache.get().then(function (authorizationResult) {\n        if (authorizationResult) {\n          // Having a prior authorization result is, right now, the best\n          // indication that a mobile wallet is installed. There is no API\n          // we can use to test for whether the association URI is supported.\n          _this.declareWalletAsInstalled();\n        }\n      });\n    }\n    return _this;\n  }\n  _createClass(SolanaMobileWalletAdapter, [{\n    key: \"publicKey\",\n    get: function get() {\n      if (this._publicKey == null && this._selectedAddress != null) {\n        try {\n          this._publicKey = getPublicKeyFromAddress(this._selectedAddress);\n        } catch (e) {\n          throw new WalletPublicKeyError(e instanceof Error && (e === null || e === void 0 ? void 0 : e.message) || 'Unknown error', e);\n        }\n      }\n      return this._publicKey ? this._publicKey : null;\n    }\n  }, {\n    key: \"connected\",\n    get: function get() {\n      return !!this._authorizationResult;\n    }\n  }, {\n    key: \"connecting\",\n    get: function get() {\n      return this._connecting;\n    }\n  }, {\n    key: \"readyState\",\n    get: function get() {\n      return this._readyState;\n    }\n  }, {\n    key: \"declareWalletAsInstalled\",\n    value: function declareWalletAsInstalled() {\n      if (this._readyState !== WalletReadyState.Installed) {\n        this.emit('readyStateChange', this._readyState = WalletReadyState.Installed);\n      }\n    }\n  }, {\n    key: \"runWithGuard\",\n    value: function runWithGuard(callback) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return callback();\n              case 3:\n                return _context.abrupt(\"return\", _context.sent);\n              case 6:\n                _context.prev = 6;\n                _context.t0 = _context[\"catch\"](0);\n                this.emit('error', _context.t0);\n                throw _context.t0;\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 6]]);\n      }));\n    }\n  }, {\n    key: \"autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\",\n    value: function autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED() {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var _this2 = this;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(this.connecting || this.connected)) {\n                  _context3.next = 2;\n                  break;\n                }\n                return _context3.abrupt(\"return\");\n              case 2:\n                _context3.next = 4;\n                return this.runWithGuard(function () {\n                  return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n                    var cachedAuthorizationResult;\n                    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            if (!(this._readyState !== WalletReadyState.Installed && this._readyState !== WalletReadyState.Loadable)) {\n                              _context2.next = 2;\n                              break;\n                            }\n                            throw new WalletNotReadyError();\n                          case 2:\n                            this._connecting = true;\n                            _context2.prev = 3;\n                            _context2.next = 6;\n                            return this._authorizationResultCache.get();\n                          case 6:\n                            cachedAuthorizationResult = _context2.sent;\n                            if (cachedAuthorizationResult) {\n                              // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                              this.handleAuthorizationResult(cachedAuthorizationResult);\n                            }\n                            _context2.next = 13;\n                            break;\n                          case 10:\n                            _context2.prev = 10;\n                            _context2.t0 = _context2[\"catch\"](3);\n                            throw new WalletConnectionError(_context2.t0 instanceof Error && _context2.t0.message || 'Unknown error', _context2.t0);\n                          case 13:\n                            _context2.prev = 13;\n                            this._connecting = false;\n                            return _context2.finish(13);\n                          case 16:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2, this, [[3, 10, 13, 16]]);\n                  }));\n                });\n              case 4:\n                return _context3.abrupt(\"return\", _context3.sent);\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n    }\n  }, {\n    key: \"connect\",\n    value: function connect() {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var _this3 = this;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (!(this.connecting || this.connected)) {\n                  _context6.next = 2;\n                  break;\n                }\n                return _context6.abrupt(\"return\");\n              case 2:\n                _context6.next = 4;\n                return this.runWithGuard(function () {\n                  return __awaiter(_this3, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n                    var _this4 = this;\n                    var cachedAuthorizationResult;\n                    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n                      while (1) {\n                        switch (_context5.prev = _context5.next) {\n                          case 0:\n                            if (!(this._readyState !== WalletReadyState.Installed && this._readyState !== WalletReadyState.Loadable)) {\n                              _context5.next = 2;\n                              break;\n                            }\n                            throw new WalletNotReadyError();\n                          case 2:\n                            this._connecting = true;\n                            _context5.prev = 3;\n                            _context5.next = 6;\n                            return this._authorizationResultCache.get();\n                          case 6:\n                            cachedAuthorizationResult = _context5.sent;\n                            if (!cachedAuthorizationResult) {\n                              _context5.next = 10;\n                              break;\n                            }\n                            // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                            this.handleAuthorizationResult(cachedAuthorizationResult);\n                            return _context5.abrupt(\"return\");\n                          case 10:\n                            _context5.next = 12;\n                            return this.transact(function (wallet) {\n                              return __awaiter(_this4, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n                                var authorizationResult;\n                                return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n                                  while (1) {\n                                    switch (_context4.prev = _context4.next) {\n                                      case 0:\n                                        _context4.next = 2;\n                                        return wallet.authorize({\n                                          cluster: this._cluster,\n                                          identity: this._appIdentity\n                                        });\n                                      case 2:\n                                        authorizationResult = _context4.sent;\n                                        // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                                        Promise.all([this._authorizationResultCache.set(authorizationResult), this.handleAuthorizationResult(authorizationResult)]);\n                                      case 4:\n                                      case \"end\":\n                                        return _context4.stop();\n                                    }\n                                  }\n                                }, _callee4, this);\n                              }));\n                            });\n                          case 12:\n                            _context5.next = 17;\n                            break;\n                          case 14:\n                            _context5.prev = 14;\n                            _context5.t0 = _context5[\"catch\"](3);\n                            throw new WalletConnectionError(_context5.t0 instanceof Error && _context5.t0.message || 'Unknown error', _context5.t0);\n                          case 17:\n                            _context5.prev = 17;\n                            this._connecting = false;\n                            return _context5.finish(17);\n                          case 20:\n                          case \"end\":\n                            return _context5.stop();\n                        }\n                      }\n                    }, _callee5, this, [[3, 14, 17, 20]]);\n                  }));\n                });\n              case 4:\n                return _context6.abrupt(\"return\", _context6.sent);\n              case 5:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n    }\n  }, {\n    key: \"handleAuthorizationResult\",\n    value: function handleAuthorizationResult(authorizationResult) {\n      var _a;\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n        var didPublicKeysChange, nextSelectedAddress;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                didPublicKeysChange =\n                // Case 1: We started from having no authorization.\n                this._authorizationResult == null ||\n                // Case 2: The number of authorized accounts changed.\n                ((_a = this._authorizationResult) === null || _a === void 0 ? void 0 : _a.accounts.length) !== authorizationResult.accounts.length ||\n                // Case 3: The new list of addresses isn't exactly the same as the old list, in the same order.\n                this._authorizationResult.accounts.some(function (account, ii) {\n                  return account.address !== authorizationResult.accounts[ii].address;\n                });\n                this._authorizationResult = authorizationResult;\n                this.declareWalletAsInstalled();\n                if (!didPublicKeysChange) {\n                  _context7.next = 8;\n                  break;\n                }\n                _context7.next = 6;\n                return this._addressSelector.select(authorizationResult.accounts.map(function (_ref) {\n                  var address = _ref.address;\n                  return address;\n                }));\n              case 6:\n                nextSelectedAddress = _context7.sent;\n                if (nextSelectedAddress !== this._selectedAddress) {\n                  this._selectedAddress = nextSelectedAddress;\n                  delete this._publicKey;\n                  this.emit('connect',\n                  // Having just set `this._selectedAddress`, `this.publicKey` is definitely non-null\n                  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                  this.publicKey);\n                }\n              case 8:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n    }\n  }, {\n    key: \"performReauthorization\",\n    value: function performReauthorization(wallet, authToken) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n        var authorizationResult;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                _context8.next = 3;\n                return wallet.reauthorize({\n                  auth_token: authToken\n                });\n              case 3:\n                authorizationResult = _context8.sent;\n                // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                Promise.all([this._authorizationResultCache.set(authorizationResult), this.handleAuthorizationResult(authorizationResult)]);\n                _context8.next = 11;\n                break;\n              case 7:\n                _context8.prev = 7;\n                _context8.t0 = _context8[\"catch\"](0);\n                this.disconnect();\n                throw new WalletDisconnectedError(_context8.t0 instanceof Error && (_context8.t0 === null || _context8.t0 === void 0 ? void 0 : _context8.t0.message) || 'Unknown error', _context8.t0);\n              case 11:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[0, 7]]);\n      }));\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                this._authorizationResultCache.clear(); // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                this._connecting = false;\n                this._connectionGeneration++;\n                delete this._authorizationResult;\n                delete this._publicKey;\n                delete this._selectedAddress;\n                this.emit('disconnect');\n              case 7:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n    }\n  }, {\n    key: \"transact\",\n    value: function transact(callback) {\n      var _a;\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n        var walletUriBase, config, currentConnectionGeneration;\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                walletUriBase = (_a = this._authorizationResult) === null || _a === void 0 ? void 0 : _a.wallet_uri_base;\n                config = walletUriBase ? {\n                  baseUri: walletUriBase\n                } : undefined;\n                currentConnectionGeneration = this._connectionGeneration;\n                _context10.prev = 3;\n                _context10.next = 6;\n                return _transact(callback, config);\n              case 6:\n                return _context10.abrupt(\"return\", _context10.sent);\n              case 9:\n                _context10.prev = 9;\n                _context10.t0 = _context10[\"catch\"](3);\n                if (!(this._connectionGeneration !== currentConnectionGeneration)) {\n                  _context10.next = 14;\n                  break;\n                }\n                _context10.next = 14;\n                return new Promise(function () {});\n              case 14:\n                if (!(_context10.t0 instanceof Error && _context10.t0.name === 'SolanaMobileWalletAdapterError' && _context10.t0.code === 'ERROR_WALLET_NOT_FOUND')) {\n                  _context10.next = 17;\n                  break;\n                }\n                _context10.next = 17;\n                return this._onWalletNotFound(this);\n              case 17:\n                throw _context10.t0;\n              case 18:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this, [[3, 9]]);\n      }));\n    }\n  }, {\n    key: \"assertIsAuthorized\",\n    value: function assertIsAuthorized() {\n      if (!this._authorizationResult || !this._selectedAddress) throw new WalletNotConnectedError();\n      return {\n        authToken: this._authorizationResult.auth_token,\n        selectedAddress: this._selectedAddress\n      };\n    }\n  }, {\n    key: \"performSignTransactions\",\n    value: function performSignTransactions(transactions) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {\n        var _this5 = this;\n        var _this$assertIsAuthori, authToken;\n        return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _this$assertIsAuthori = this.assertIsAuthorized(), authToken = _this$assertIsAuthori.authToken;\n                _context12.prev = 1;\n                _context12.next = 4;\n                return this.transact(function (wallet) {\n                  return __awaiter(_this5, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee11() {\n                    var signedTransactions;\n                    return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n                      while (1) {\n                        switch (_context11.prev = _context11.next) {\n                          case 0:\n                            _context11.next = 2;\n                            return this.performReauthorization(wallet, authToken);\n                          case 2:\n                            _context11.next = 4;\n                            return wallet.signTransactions({\n                              transactions: transactions\n                            });\n                          case 4:\n                            signedTransactions = _context11.sent;\n                            return _context11.abrupt(\"return\", signedTransactions);\n                          case 6:\n                          case \"end\":\n                            return _context11.stop();\n                        }\n                      }\n                    }, _callee11, this);\n                  }));\n                });\n              case 4:\n                return _context12.abrupt(\"return\", _context12.sent);\n              case 7:\n                _context12.prev = 7;\n                _context12.t0 = _context12[\"catch\"](1);\n                throw new WalletSignTransactionError(_context12.t0 === null || _context12.t0 === void 0 ? void 0 : _context12.t0.message, _context12.t0);\n              case 10:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this, [[1, 7]]);\n      }));\n    }\n  }, {\n    key: \"sendTransaction\",\n    value: function sendTransaction(transaction, connection, options) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee16() {\n        var _this6 = this;\n        return _regeneratorRuntime().wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                _context16.next = 2;\n                return this.runWithGuard(function () {\n                  return __awaiter(_this6, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee15() {\n                    var _this7 = this;\n                    var _this$assertIsAuthori2, authToken, minContextSlot;\n                    return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n                      while (1) {\n                        switch (_context15.prev = _context15.next) {\n                          case 0:\n                            _this$assertIsAuthori2 = this.assertIsAuthorized(), authToken = _this$assertIsAuthori2.authToken;\n                            minContextSlot = options === null || options === void 0 ? void 0 : options.minContextSlot;\n                            _context15.prev = 2;\n                            _context15.next = 5;\n                            return this.transact(function (wallet) {\n                              return __awaiter(_this7, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee14() {\n                                var _this8 = this;\n                                var getTargetCommitment, _yield$Promise$all, _yield$Promise$all2, capabilities, _1, _2, signatures, _yield$wallet$signTra, _yield$wallet$signTra2, signedTransaction, serializedTransaction;\n                                return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n                                  while (1) {\n                                    switch (_context14.prev = _context14.next) {\n                                      case 0:\n                                        getTargetCommitment = function _getTargetCommitment() {\n                                          var targetCommitment;\n                                          switch (connection.commitment) {\n                                            case 'confirmed':\n                                            case 'finalized':\n                                            case 'processed':\n                                              targetCommitment = connection.commitment;\n                                              break;\n                                            default:\n                                              targetCommitment = 'finalized';\n                                          }\n                                          var targetPreflightCommitment;\n                                          switch (options === null || options === void 0 ? void 0 : options.preflightCommitment) {\n                                            case 'confirmed':\n                                            case 'finalized':\n                                            case 'processed':\n                                              targetPreflightCommitment = options.preflightCommitment;\n                                              break;\n                                            case undefined:\n                                              targetPreflightCommitment = targetCommitment;\n                                            default:\n                                              targetPreflightCommitment = 'finalized';\n                                          }\n                                          var preflightCommitmentScore = targetPreflightCommitment === 'finalized' ? 2 : targetPreflightCommitment === 'confirmed' ? 1 : 0;\n                                          var targetCommitmentScore = targetCommitment === 'finalized' ? 2 : targetCommitment === 'confirmed' ? 1 : 0;\n                                          return preflightCommitmentScore < targetCommitmentScore ? targetPreflightCommitment : targetCommitment;\n                                        };\n                                        _context14.next = 3;\n                                        return Promise.all([wallet.getCapabilities(), this.performReauthorization(wallet, authToken), isVersionedTransaction(transaction) ? null :\n                                        /**\n                                         * Unlike versioned transactions, legacy `Transaction` objects\n                                         * may not have an associated `feePayer` or `recentBlockhash`.\n                                         * This code exists to patch them up in case they are missing.\n                                         */\n                                        function () {\n                                          return __awaiter(_this8, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee13() {\n                                            var _a, _yield$connection$get, blockhash;\n                                            return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n                                              while (1) {\n                                                switch (_context13.prev = _context13.next) {\n                                                  case 0:\n                                                    transaction.feePayer || (transaction.feePayer = (_a = this.publicKey) !== null && _a !== void 0 ? _a : undefined);\n                                                    if (!(transaction.recentBlockhash == null)) {\n                                                      _context13.next = 7;\n                                                      break;\n                                                    }\n                                                    _context13.next = 4;\n                                                    return connection.getLatestBlockhash({\n                                                      commitment: getTargetCommitment()\n                                                    });\n                                                  case 4:\n                                                    _yield$connection$get = _context13.sent;\n                                                    blockhash = _yield$connection$get.blockhash;\n                                                    transaction.recentBlockhash = blockhash;\n                                                  case 7:\n                                                  case \"end\":\n                                                    return _context13.stop();\n                                                }\n                                              }\n                                            }, _callee13, this);\n                                          }));\n                                        }()]);\n                                      case 3:\n                                        _yield$Promise$all = _context14.sent;\n                                        _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 3);\n                                        capabilities = _yield$Promise$all2[0];\n                                        _1 = _yield$Promise$all2[1];\n                                        _2 = _yield$Promise$all2[2];\n                                        if (!capabilities.supports_sign_and_send_transactions) {\n                                          _context14.next = 15;\n                                          break;\n                                        }\n                                        _context14.next = 11;\n                                        return wallet.signAndSendTransactions({\n                                          minContextSlot: minContextSlot,\n                                          transactions: [transaction]\n                                        });\n                                      case 11:\n                                        signatures = _context14.sent;\n                                        return _context14.abrupt(\"return\", signatures[0]);\n                                      case 15:\n                                        _context14.next = 17;\n                                        return wallet.signTransactions({\n                                          transactions: [transaction]\n                                        });\n                                      case 17:\n                                        _yield$wallet$signTra = _context14.sent;\n                                        _yield$wallet$signTra2 = _slicedToArray(_yield$wallet$signTra, 1);\n                                        signedTransaction = _yield$wallet$signTra2[0];\n                                        if (!isVersionedTransaction(signedTransaction)) {\n                                          _context14.next = 26;\n                                          break;\n                                        }\n                                        _context14.next = 23;\n                                        return connection.sendTransaction(signedTransaction);\n                                      case 23:\n                                        return _context14.abrupt(\"return\", _context14.sent);\n                                      case 26:\n                                        serializedTransaction = signedTransaction.serialize();\n                                        _context14.next = 29;\n                                        return connection.sendRawTransaction(serializedTransaction, Object.assign(Object.assign({}, options), {\n                                          preflightCommitment: getTargetCommitment()\n                                        }));\n                                      case 29:\n                                        return _context14.abrupt(\"return\", _context14.sent);\n                                      case 30:\n                                      case \"end\":\n                                        return _context14.stop();\n                                    }\n                                  }\n                                }, _callee14, this);\n                              }));\n                            });\n                          case 5:\n                            return _context15.abrupt(\"return\", _context15.sent);\n                          case 8:\n                            _context15.prev = 8;\n                            _context15.t0 = _context15[\"catch\"](2);\n                            throw new WalletSendTransactionError(_context15.t0 === null || _context15.t0 === void 0 ? void 0 : _context15.t0.message, _context15.t0);\n                          case 11:\n                          case \"end\":\n                            return _context15.stop();\n                        }\n                      }\n                    }, _callee15, this, [[2, 8]]);\n                  }));\n                });\n              case 2:\n                return _context16.abrupt(\"return\", _context16.sent);\n              case 3:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16, this);\n      }));\n    }\n  }, {\n    key: \"signTransaction\",\n    value: function signTransaction(transaction) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee18() {\n        var _this9 = this;\n        return _regeneratorRuntime().wrap(function _callee18$(_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                _context18.next = 2;\n                return this.runWithGuard(function () {\n                  return __awaiter(_this9, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee17() {\n                    var _yield$this$performSi, _yield$this$performSi2, signedTransaction;\n                    return _regeneratorRuntime().wrap(function _callee17$(_context17) {\n                      while (1) {\n                        switch (_context17.prev = _context17.next) {\n                          case 0:\n                            _context17.next = 2;\n                            return this.performSignTransactions([transaction]);\n                          case 2:\n                            _yield$this$performSi = _context17.sent;\n                            _yield$this$performSi2 = _slicedToArray(_yield$this$performSi, 1);\n                            signedTransaction = _yield$this$performSi2[0];\n                            return _context17.abrupt(\"return\", signedTransaction);\n                          case 6:\n                          case \"end\":\n                            return _context17.stop();\n                        }\n                      }\n                    }, _callee17, this);\n                  }));\n                });\n              case 2:\n                return _context18.abrupt(\"return\", _context18.sent);\n              case 3:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee18, this);\n      }));\n    }\n  }, {\n    key: \"signAllTransactions\",\n    value: function signAllTransactions(transactions) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee20() {\n        var _this10 = this;\n        return _regeneratorRuntime().wrap(function _callee20$(_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                _context20.next = 2;\n                return this.runWithGuard(function () {\n                  return __awaiter(_this10, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee19() {\n                    var signedTransactions;\n                    return _regeneratorRuntime().wrap(function _callee19$(_context19) {\n                      while (1) {\n                        switch (_context19.prev = _context19.next) {\n                          case 0:\n                            _context19.next = 2;\n                            return this.performSignTransactions(transactions);\n                          case 2:\n                            signedTransactions = _context19.sent;\n                            return _context19.abrupt(\"return\", signedTransactions);\n                          case 4:\n                          case \"end\":\n                            return _context19.stop();\n                        }\n                      }\n                    }, _callee19, this);\n                  }));\n                });\n              case 2:\n                return _context20.abrupt(\"return\", _context20.sent);\n              case 3:\n              case \"end\":\n                return _context20.stop();\n            }\n          }\n        }, _callee20, this);\n      }));\n    }\n  }, {\n    key: \"signMessage\",\n    value: function signMessage(message) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee23() {\n        var _this11 = this;\n        return _regeneratorRuntime().wrap(function _callee23$(_context23) {\n          while (1) {\n            switch (_context23.prev = _context23.next) {\n              case 0:\n                _context23.next = 2;\n                return this.runWithGuard(function () {\n                  return __awaiter(_this11, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee22() {\n                    var _this12 = this;\n                    var _this$assertIsAuthori3, authToken, selectedAddress;\n                    return _regeneratorRuntime().wrap(function _callee22$(_context22) {\n                      while (1) {\n                        switch (_context22.prev = _context22.next) {\n                          case 0:\n                            _this$assertIsAuthori3 = this.assertIsAuthorized(), authToken = _this$assertIsAuthori3.authToken, selectedAddress = _this$assertIsAuthori3.selectedAddress;\n                            _context22.prev = 1;\n                            _context22.next = 4;\n                            return this.transact(function (wallet) {\n                              return __awaiter(_this12, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee21() {\n                                var _yield$wallet$signMes, _yield$wallet$signMes2, signedMessage, signature;\n                                return _regeneratorRuntime().wrap(function _callee21$(_context21) {\n                                  while (1) {\n                                    switch (_context21.prev = _context21.next) {\n                                      case 0:\n                                        _context21.next = 2;\n                                        return this.performReauthorization(wallet, authToken);\n                                      case 2:\n                                        _context21.next = 4;\n                                        return wallet.signMessages({\n                                          addresses: [selectedAddress],\n                                          payloads: [message]\n                                        });\n                                      case 4:\n                                        _yield$wallet$signMes = _context21.sent;\n                                        _yield$wallet$signMes2 = _slicedToArray(_yield$wallet$signMes, 1);\n                                        signedMessage = _yield$wallet$signMes2[0];\n                                        signature = signedMessage.slice(-SIGNATURE_LENGTH_IN_BYTES);\n                                        return _context21.abrupt(\"return\", signature);\n                                      case 9:\n                                      case \"end\":\n                                        return _context21.stop();\n                                    }\n                                  }\n                                }, _callee21, this);\n                              }));\n                            });\n                          case 4:\n                            return _context22.abrupt(\"return\", _context22.sent);\n                          case 7:\n                            _context22.prev = 7;\n                            _context22.t0 = _context22[\"catch\"](1);\n                            throw new WalletSignMessageError(_context22.t0 === null || _context22.t0 === void 0 ? void 0 : _context22.t0.message, _context22.t0);\n                          case 10:\n                          case \"end\":\n                            return _context22.stop();\n                        }\n                      }\n                    }, _callee22, this, [[1, 7]]);\n                  }));\n                });\n              case 2:\n                return _context23.abrupt(\"return\", _context23.sent);\n              case 3:\n              case \"end\":\n                return _context23.stop();\n            }\n          }\n        }, _callee23, this);\n      }));\n    }\n  }]);\n  return SolanaMobileWalletAdapter;\n}(BaseMessageSignerWalletAdapter);\nfunction createDefaultAddressSelector() {\n  return {\n    select: function select(addresses) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee24() {\n        return _regeneratorRuntime().wrap(function _callee24$(_context24) {\n          while (1) {\n            switch (_context24.prev = _context24.next) {\n              case 0:\n                return _context24.abrupt(\"return\", addresses[0]);\n              case 1:\n              case \"end\":\n                return _context24.stop();\n            }\n          }\n        }, _callee24);\n      }));\n    }\n  };\n}\nvar CACHE_KEY = 'SolanaMobileWalletAdapterDefaultAuthorizationCache';\nfunction createDefaultAuthorizationResultCache() {\n  var storage;\n  try {\n    storage = window.localStorage;\n    // eslint-disable-next-line no-empty\n  } catch (_a) {}\n  return {\n    clear: function clear() {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee25() {\n        return _regeneratorRuntime().wrap(function _callee25$(_context25) {\n          while (1) {\n            switch (_context25.prev = _context25.next) {\n              case 0:\n                if (storage) {\n                  _context25.next = 2;\n                  break;\n                }\n                return _context25.abrupt(\"return\");\n              case 2:\n                try {\n                  storage.removeItem(CACHE_KEY);\n                  // eslint-disable-next-line no-empty\n                } catch (_a) {}\n              case 3:\n              case \"end\":\n                return _context25.stop();\n            }\n          }\n        }, _callee25);\n      }));\n    },\n    get: function get() {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee26() {\n        return _regeneratorRuntime().wrap(function _callee26$(_context26) {\n          while (1) {\n            switch (_context26.prev = _context26.next) {\n              case 0:\n                if (storage) {\n                  _context26.next = 2;\n                  break;\n                }\n                return _context26.abrupt(\"return\");\n              case 2:\n                _context26.prev = 2;\n                return _context26.abrupt(\"return\", JSON.parse(storage.getItem(CACHE_KEY)) || undefined);\n              case 6:\n                _context26.prev = 6;\n                _context26.t0 = _context26[\"catch\"](2);\n              case 8:\n              case \"end\":\n                return _context26.stop();\n            }\n          }\n        }, _callee26, null, [[2, 6]]);\n      }));\n    },\n    set: function set(authorizationResult) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee27() {\n        return _regeneratorRuntime().wrap(function _callee27$(_context27) {\n          while (1) {\n            switch (_context27.prev = _context27.next) {\n              case 0:\n                if (storage) {\n                  _context27.next = 2;\n                  break;\n                }\n                return _context27.abrupt(\"return\");\n              case 2:\n                try {\n                  storage.setItem(CACHE_KEY, JSON.stringify(authorizationResult));\n                  // eslint-disable-next-line no-empty\n                } catch (_a) {}\n              case 3:\n              case \"end\":\n                return _context27.stop();\n            }\n          }\n        }, _callee27);\n      }));\n    }\n  };\n}\nfunction defaultWalletNotFoundHandler(mobileWalletAdapter) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee28() {\n    return _regeneratorRuntime().wrap(function _callee28$(_context28) {\n      while (1) {\n        switch (_context28.prev = _context28.next) {\n          case 0:\n            if (typeof window !== 'undefined') {\n              window.location.assign(mobileWalletAdapter.url);\n            }\n          case 1:\n          case \"end\":\n            return _context28.stop();\n        }\n      }\n    }, _callee28);\n  }));\n}\nfunction createDefaultWalletNotFoundHandler() {\n  return defaultWalletNotFoundHandler;\n}\nexport { SolanaMobileWalletAdapter, SolanaMobileWalletAdapterWalletName, createDefaultAddressSelector, createDefaultAuthorizationResultCache, createDefaultWalletNotFoundHandler };","map":{"version":3,"names":["BaseMessageSignerWalletAdapter","WalletReadyState","WalletPublicKeyError","WalletNotReadyError","WalletConnectionError","WalletDisconnectedError","WalletNotConnectedError","WalletSignTransactionError","WalletSendTransactionError","WalletSignMessageError","PublicKey","transact","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","toUint8Array","base64EncodedByteArray","Uint8Array","window","atob","split","map","c","charCodeAt","getIsSupported","isSecureContext","document","test","navigator","userAgent","SolanaMobileWalletAdapterWalletName","SIGNATURE_LENGTH_IN_BYTES","getPublicKeyFromAddress","address","publicKeyByteArray","isVersionedTransaction","transaction","SolanaMobileWalletAdapter","config","supportedTransactionVersions","Set","name","url","icon","_connecting","_connectionGeneration","_readyState","Loadable","Unsupported","_authorizationResultCache","authorizationResultCache","_addressSelector","addressSelector","_appIdentity","appIdentity","_cluster","cluster","_onWalletNotFound","onWalletNotFound","get","authorizationResult","declareWalletAsInstalled","_publicKey","_selectedAddress","Error","message","_authorizationResult","Installed","emit","callback","connecting","connected","runWithGuard","cachedAuthorizationResult","handleAuthorizationResult","wallet","authorize","identity","all","set","_a","didPublicKeysChange","accounts","length","some","account","ii","select","nextSelectedAddress","publicKey","authToken","reauthorize","auth_token","disconnect","clear","walletUriBase","wallet_uri_base","baseUri","undefined","currentConnectionGeneration","code","selectedAddress","transactions","assertIsAuthorized","performReauthorization","signTransactions","signedTransactions","connection","options","minContextSlot","getTargetCommitment","targetCommitment","commitment","targetPreflightCommitment","preflightCommitment","preflightCommitmentScore","targetCommitmentScore","getCapabilities","feePayer","recentBlockhash","getLatestBlockhash","blockhash","capabilities","_1","_2","supports_sign_and_send_transactions","signAndSendTransactions","signatures","signedTransaction","sendTransaction","serializedTransaction","serialize","sendRawTransaction","Object","assign","performSignTransactions","signMessages","addresses","payloads","signedMessage","signature","slice","createDefaultAddressSelector","CACHE_KEY","createDefaultAuthorizationResultCache","storage","localStorage","removeItem","JSON","parse","getItem","setItem","stringify","defaultWalletNotFoundHandler","mobileWalletAdapter","location","createDefaultWalletNotFoundHandler"],"sources":["/Users/ivan/Metadata/node_modules/@solana-mobile/wallet-adapter-mobile/lib/esm/index.js"],"sourcesContent":["import { BaseMessageSignerWalletAdapter, WalletReadyState, WalletPublicKeyError, WalletNotReadyError, WalletConnectionError, WalletDisconnectedError, WalletNotConnectedError, WalletSignTransactionError, WalletSendTransactionError, WalletSignMessageError } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nimport { transact } from '@solana-mobile/mobile-wallet-adapter-protocol-web3js';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nfunction toUint8Array(base64EncodedByteArray) {\n    return new Uint8Array(window\n        .atob(base64EncodedByteArray)\n        .split('')\n        .map((c) => c.charCodeAt(0)));\n}\n\nfunction getIsSupported() {\n    return (typeof window !== 'undefined' &&\n        window.isSecureContext &&\n        typeof document !== 'undefined' &&\n        /android/i.test(navigator.userAgent));\n}\n\nconst SolanaMobileWalletAdapterWalletName = 'Mobile Wallet Adapter';\nconst SIGNATURE_LENGTH_IN_BYTES = 64;\nfunction getPublicKeyFromAddress(address) {\n    const publicKeyByteArray = toUint8Array(address);\n    return new PublicKey(publicKeyByteArray);\n}\nfunction isVersionedTransaction(transaction) {\n    return 'version' in transaction;\n}\nclass SolanaMobileWalletAdapter extends BaseMessageSignerWalletAdapter {\n    constructor(config) {\n        super();\n        this.supportedTransactionVersions = new Set(\n        // FIXME(#244): We can't actually know what versions are supported until we know which wallet we're talking to.\n        ['legacy', 0]);\n        this.name = SolanaMobileWalletAdapterWalletName;\n        this.url = 'https://solanamobile.com/wallets';\n        this.icon = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==';\n        this._connecting = false;\n        /**\n         * Every time the connection is recycled in some way (eg. `disconnect()` is called)\n         * increment this and use it to make sure that `transact` calls from the previous\n         * 'generation' don't continue to do work and throw exceptions.\n         */\n        this._connectionGeneration = 0;\n        this._readyState = getIsSupported() ? WalletReadyState.Loadable : WalletReadyState.Unsupported;\n        this._authorizationResultCache = config.authorizationResultCache;\n        this._addressSelector = config.addressSelector;\n        this._appIdentity = config.appIdentity;\n        this._cluster = config.cluster;\n        this._onWalletNotFound = config.onWalletNotFound;\n        if (this._readyState !== WalletReadyState.Unsupported) {\n            this._authorizationResultCache.get().then((authorizationResult) => {\n                if (authorizationResult) {\n                    // Having a prior authorization result is, right now, the best\n                    // indication that a mobile wallet is installed. There is no API\n                    // we can use to test for whether the association URI is supported.\n                    this.declareWalletAsInstalled();\n                }\n            });\n        }\n    }\n    get publicKey() {\n        if (this._publicKey == null && this._selectedAddress != null) {\n            try {\n                this._publicKey = getPublicKeyFromAddress(this._selectedAddress);\n            }\n            catch (e) {\n                throw new WalletPublicKeyError((e instanceof Error && (e === null || e === void 0 ? void 0 : e.message)) || 'Unknown error', e);\n            }\n        }\n        return this._publicKey ? this._publicKey : null;\n    }\n    get connected() {\n        return !!this._authorizationResult;\n    }\n    get connecting() {\n        return this._connecting;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n    declareWalletAsInstalled() {\n        if (this._readyState !== WalletReadyState.Installed) {\n            this.emit('readyStateChange', (this._readyState = WalletReadyState.Installed));\n        }\n    }\n    runWithGuard(callback) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield callback();\n            }\n            catch (e) {\n                this.emit('error', e);\n                throw e;\n            }\n        });\n    }\n    autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.connecting || this.connected) {\n                return;\n            }\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                if (this._readyState !== WalletReadyState.Installed && this._readyState !== WalletReadyState.Loadable) {\n                    throw new WalletNotReadyError();\n                }\n                this._connecting = true;\n                try {\n                    const cachedAuthorizationResult = yield this._authorizationResultCache.get();\n                    if (cachedAuthorizationResult) {\n                        // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                        this.handleAuthorizationResult(cachedAuthorizationResult);\n                    }\n                }\n                catch (e) {\n                    throw new WalletConnectionError((e instanceof Error && e.message) || 'Unknown error', e);\n                }\n                finally {\n                    this._connecting = false;\n                }\n            }));\n        });\n    }\n    connect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.connecting || this.connected) {\n                return;\n            }\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                if (this._readyState !== WalletReadyState.Installed && this._readyState !== WalletReadyState.Loadable) {\n                    throw new WalletNotReadyError();\n                }\n                this._connecting = true;\n                try {\n                    const cachedAuthorizationResult = yield this._authorizationResultCache.get();\n                    if (cachedAuthorizationResult) {\n                        // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                        this.handleAuthorizationResult(cachedAuthorizationResult);\n                        return;\n                    }\n                    yield this.transact((wallet) => __awaiter(this, void 0, void 0, function* () {\n                        const authorizationResult = yield wallet.authorize({\n                            cluster: this._cluster,\n                            identity: this._appIdentity,\n                        });\n                        // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                        Promise.all([\n                            this._authorizationResultCache.set(authorizationResult),\n                            this.handleAuthorizationResult(authorizationResult),\n                        ]);\n                    }));\n                }\n                catch (e) {\n                    throw new WalletConnectionError((e instanceof Error && e.message) || 'Unknown error', e);\n                }\n                finally {\n                    this._connecting = false;\n                }\n            }));\n        });\n    }\n    handleAuthorizationResult(authorizationResult) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const didPublicKeysChange = \n            // Case 1: We started from having no authorization.\n            this._authorizationResult == null ||\n                // Case 2: The number of authorized accounts changed.\n                ((_a = this._authorizationResult) === null || _a === void 0 ? void 0 : _a.accounts.length) !== authorizationResult.accounts.length ||\n                // Case 3: The new list of addresses isn't exactly the same as the old list, in the same order.\n                this._authorizationResult.accounts.some((account, ii) => account.address !== authorizationResult.accounts[ii].address);\n            this._authorizationResult = authorizationResult;\n            this.declareWalletAsInstalled();\n            if (didPublicKeysChange) {\n                const nextSelectedAddress = yield this._addressSelector.select(authorizationResult.accounts.map(({ address }) => address));\n                if (nextSelectedAddress !== this._selectedAddress) {\n                    this._selectedAddress = nextSelectedAddress;\n                    delete this._publicKey;\n                    this.emit('connect', \n                    // Having just set `this._selectedAddress`, `this.publicKey` is definitely non-null\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    this.publicKey);\n                }\n            }\n        });\n    }\n    performReauthorization(wallet, authToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const authorizationResult = yield wallet.reauthorize({\n                    auth_token: authToken,\n                });\n                // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                Promise.all([\n                    this._authorizationResultCache.set(authorizationResult),\n                    this.handleAuthorizationResult(authorizationResult),\n                ]);\n            }\n            catch (e) {\n                this.disconnect();\n                throw new WalletDisconnectedError((e instanceof Error && (e === null || e === void 0 ? void 0 : e.message)) || 'Unknown error', e);\n            }\n        });\n    }\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._authorizationResultCache.clear(); // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n            this._connecting = false;\n            this._connectionGeneration++;\n            delete this._authorizationResult;\n            delete this._publicKey;\n            delete this._selectedAddress;\n            this.emit('disconnect');\n        });\n    }\n    transact(callback) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const walletUriBase = (_a = this._authorizationResult) === null || _a === void 0 ? void 0 : _a.wallet_uri_base;\n            const config = walletUriBase ? { baseUri: walletUriBase } : undefined;\n            const currentConnectionGeneration = this._connectionGeneration;\n            try {\n                return yield transact(callback, config);\n            }\n            catch (e) {\n                if (this._connectionGeneration !== currentConnectionGeneration) {\n                    yield new Promise(() => { }); // Never resolve.\n                }\n                if (e instanceof Error &&\n                    e.name === 'SolanaMobileWalletAdapterError' &&\n                    e.code === 'ERROR_WALLET_NOT_FOUND') {\n                    yield this._onWalletNotFound(this);\n                }\n                throw e;\n            }\n        });\n    }\n    assertIsAuthorized() {\n        if (!this._authorizationResult || !this._selectedAddress)\n            throw new WalletNotConnectedError();\n        return {\n            authToken: this._authorizationResult.auth_token,\n            selectedAddress: this._selectedAddress,\n        };\n    }\n    performSignTransactions(transactions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { authToken } = this.assertIsAuthorized();\n            try {\n                return yield this.transact((wallet) => __awaiter(this, void 0, void 0, function* () {\n                    yield this.performReauthorization(wallet, authToken);\n                    const signedTransactions = yield wallet.signTransactions({\n                        transactions,\n                    });\n                    return signedTransactions;\n                }));\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n            }\n        });\n    }\n    sendTransaction(transaction, connection, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                const { authToken } = this.assertIsAuthorized();\n                const minContextSlot = options === null || options === void 0 ? void 0 : options.minContextSlot;\n                try {\n                    return yield this.transact((wallet) => __awaiter(this, void 0, void 0, function* () {\n                        function getTargetCommitment() {\n                            let targetCommitment;\n                            switch (connection.commitment) {\n                                case 'confirmed':\n                                case 'finalized':\n                                case 'processed':\n                                    targetCommitment = connection.commitment;\n                                    break;\n                                default:\n                                    targetCommitment = 'finalized';\n                            }\n                            let targetPreflightCommitment;\n                            switch (options === null || options === void 0 ? void 0 : options.preflightCommitment) {\n                                case 'confirmed':\n                                case 'finalized':\n                                case 'processed':\n                                    targetPreflightCommitment = options.preflightCommitment;\n                                    break;\n                                case undefined:\n                                    targetPreflightCommitment = targetCommitment;\n                                default:\n                                    targetPreflightCommitment = 'finalized';\n                            }\n                            const preflightCommitmentScore = targetPreflightCommitment === 'finalized'\n                                ? 2\n                                : targetPreflightCommitment === 'confirmed'\n                                    ? 1\n                                    : 0;\n                            const targetCommitmentScore = targetCommitment === 'finalized' ? 2 : targetCommitment === 'confirmed' ? 1 : 0;\n                            return preflightCommitmentScore < targetCommitmentScore\n                                ? targetPreflightCommitment\n                                : targetCommitment;\n                        }\n                        const [capabilities, _1, _2] = yield Promise.all([\n                            wallet.getCapabilities(),\n                            this.performReauthorization(wallet, authToken),\n                            isVersionedTransaction(transaction)\n                                ? null\n                                : /**\n                                   * Unlike versioned transactions, legacy `Transaction` objects\n                                   * may not have an associated `feePayer` or `recentBlockhash`.\n                                   * This code exists to patch them up in case they are missing.\n                                   */\n                                    (() => __awaiter(this, void 0, void 0, function* () {\n                                        var _a;\n                                        transaction.feePayer || (transaction.feePayer = (_a = this.publicKey) !== null && _a !== void 0 ? _a : undefined);\n                                        if (transaction.recentBlockhash == null) {\n                                            const { blockhash } = yield connection.getLatestBlockhash({\n                                                commitment: getTargetCommitment(),\n                                            });\n                                            transaction.recentBlockhash = blockhash;\n                                        }\n                                    }))(),\n                        ]);\n                        if (capabilities.supports_sign_and_send_transactions) {\n                            const signatures = yield wallet.signAndSendTransactions({\n                                minContextSlot,\n                                transactions: [transaction],\n                            });\n                            return signatures[0];\n                        }\n                        else {\n                            const [signedTransaction] = yield wallet.signTransactions({\n                                transactions: [transaction],\n                            });\n                            if (isVersionedTransaction(signedTransaction)) {\n                                return yield connection.sendTransaction(signedTransaction);\n                            }\n                            else {\n                                const serializedTransaction = signedTransaction.serialize();\n                                return yield connection.sendRawTransaction(serializedTransaction, Object.assign(Object.assign({}, options), { preflightCommitment: getTargetCommitment() }));\n                            }\n                        }\n                    }));\n                }\n                catch (error) {\n                    throw new WalletSendTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n                }\n            }));\n        });\n    }\n    signTransaction(transaction) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                const [signedTransaction] = yield this.performSignTransactions([transaction]);\n                return signedTransaction;\n            }));\n        });\n    }\n    signAllTransactions(transactions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                const signedTransactions = yield this.performSignTransactions(transactions);\n                return signedTransactions;\n            }));\n        });\n    }\n    signMessage(message) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                const { authToken, selectedAddress } = this.assertIsAuthorized();\n                try {\n                    return yield this.transact((wallet) => __awaiter(this, void 0, void 0, function* () {\n                        yield this.performReauthorization(wallet, authToken);\n                        const [signedMessage] = yield wallet.signMessages({\n                            addresses: [selectedAddress],\n                            payloads: [message],\n                        });\n                        const signature = signedMessage.slice(-SIGNATURE_LENGTH_IN_BYTES);\n                        return signature;\n                    }));\n                }\n                catch (error) {\n                    throw new WalletSignMessageError(error === null || error === void 0 ? void 0 : error.message, error);\n                }\n            }));\n        });\n    }\n}\n\nfunction createDefaultAddressSelector() {\n    return {\n        select(addresses) {\n            return __awaiter(this, void 0, void 0, function* () {\n                return addresses[0];\n            });\n        },\n    };\n}\n\nconst CACHE_KEY = 'SolanaMobileWalletAdapterDefaultAuthorizationCache';\nfunction createDefaultAuthorizationResultCache() {\n    let storage;\n    try {\n        storage = window.localStorage;\n        // eslint-disable-next-line no-empty\n    }\n    catch (_a) { }\n    return {\n        clear() {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!storage) {\n                    return;\n                }\n                try {\n                    storage.removeItem(CACHE_KEY);\n                    // eslint-disable-next-line no-empty\n                }\n                catch (_a) { }\n            });\n        },\n        get() {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!storage) {\n                    return;\n                }\n                try {\n                    return JSON.parse(storage.getItem(CACHE_KEY)) || undefined;\n                    // eslint-disable-next-line no-empty\n                }\n                catch (_a) { }\n            });\n        },\n        set(authorizationResult) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!storage) {\n                    return;\n                }\n                try {\n                    storage.setItem(CACHE_KEY, JSON.stringify(authorizationResult));\n                    // eslint-disable-next-line no-empty\n                }\n                catch (_a) { }\n            });\n        },\n    };\n}\n\nfunction defaultWalletNotFoundHandler(mobileWalletAdapter) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (typeof window !== 'undefined') {\n            window.location.assign(mobileWalletAdapter.url);\n        }\n    });\n}\nfunction createDefaultWalletNotFoundHandler() {\n    return defaultWalletNotFoundHandler;\n}\n\nexport { SolanaMobileWalletAdapter, SolanaMobileWalletAdapterWalletName, createDefaultAddressSelector, createDefaultAuthorizationResultCache, createDefaultWalletNotFoundHandler };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}