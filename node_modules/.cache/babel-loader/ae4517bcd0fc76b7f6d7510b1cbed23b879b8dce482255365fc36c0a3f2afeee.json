{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/ivan/Metadata/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { BaseSignerWalletAdapter, WalletAdapterNetwork, WalletConnectionError, WalletDisconnectedError, WalletDisconnectionError, WalletLoadError, WalletNotConnectedError, WalletNotReadyError, WalletReadyState, WalletSignMessageError, WalletSignTransactionError, WalletWindowClosedError } from '@solana/wallet-adapter-base';\nexport var WalletConnectWalletName = 'WalletConnect';\nexport var WalletConnectWalletAdapter = /*#__PURE__*/function (_BaseSignerWalletAdap) {\n  _inherits(WalletConnectWalletAdapter, _BaseSignerWalletAdap);\n  var _super = _createSuper(WalletConnectWalletAdapter);\n  function WalletConnectWalletAdapter(config) {\n    var _this;\n    _classCallCheck(this, WalletConnectWalletAdapter);\n    _this = _super.call(this);\n    _this.name = WalletConnectWalletName;\n    _this.url = 'https://walletconnect.org';\n    _this.icon = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNjEuNDM4NTQsOTQuMDAzOGM0OC45MTEyMywtNDcuODg4MTcgMTI4LjIxMTk5LC00Ny44ODgxNyAxNzcuMTIzMjEsMGw1Ljg4NjU1LDUuNzYzNDJjMi40NDU1NiwyLjM5NDQxIDIuNDQ1NTYsNi4yNzY1MSAwLDguNjcwOTJsLTIwLjEzNjcsMTkuNzE1NWMtMS4yMjI3OCwxLjE5NzIxIC0zLjIwNTMsMS4xOTcyMSAtNC40MjgwOCwwbC04LjEwMDU4LC03LjkzMTE1Yy0zNC4xMjE2OSwtMzMuNDA3OTggLTg5LjQ0Mzg5LC0zMy40MDc5OCAtMTIzLjU2NTU4LDBsLTguNjc1MDYsOC40OTM2MWMtMS4yMjI3OCwxLjE5NzIgLTMuMjA1MywxLjE5NzIgLTQuNDI4MDgsMGwtMjAuMTM2NjksLTE5LjcxNTVjLTIuNDQ1NTYsLTIuMzk0NDEgLTIuNDQ1NTYsLTYuMjc2NTIgMCwtOC42NzA5Mmw2LjQ2MTAxLC02LjMyNTg4em0yMTguNzY3OCw0MC43NzM3NWwxNy45MjE3LDE3LjU0Njg5YzIuNDQ1NTQsMi4zOTQ0IDIuNDQ1NTYsNi4yNzY0OCAwLjAwMDAzLDguNjcwODlsLTgwLjgxMDE3LDc5LjEyMTE0Yy0yLjQ0NTU1LDIuMzk0NDIgLTYuNDEwNTksMi4zOTQ0NSAtOC44NTYxNiwwLjAwMDA2Yy0wLjAwMDAxLC0wLjAwMDAxIC0wLjAwMDAzLC0wLjAwMDAyIC0wLjAwMDA0LC0wLjAwMDAzbC01Ny4zNTQxNCwtNTYuMTU0NThjLTAuNjExMzksLTAuNTk4NiAtMS42MDI2NSwtMC41OTg2IC0yLjIxNDA0LDBjMCwwLjAwMDAxIC0wLjAwMDAxLDAuMDAwMDEgLTAuMDAwMDEsMC4wMDAwMmwtNTcuMzUyOTIsNTYuMTU0NTNjLTIuNDQ1NTQsMi4zOTQ0MyAtNi40MTA1OCwyLjM5NDQ3IC04Ljg1NjE2LDAuMDAwMDhjLTAuMDAwMDIsLTAuMDAwMDEgLTAuMDAwMDMsLTAuMDAwMDIgLTAuMDAwMDUsLTAuMDAwMDRsLTgwLjgxMjQyLC03OS4xMjIxOWMtMi40NDU1NiwtMi4zOTQ0IC0yLjQ0NTU2LC02LjI3NjUxIDAsLTguNjcwOTFsMTcuOTIxNzMsLTE3LjU0Njg3YzIuNDQ1NTYsLTIuMzk0NDEgNi40MTA2LC0yLjM5NDQxIDguODU2MTYsMGw1Ny4zNTQ5OCw1Ni4xNTUzNWMwLjYxMTM5LDAuNTk4NjEgMS42MDI2NSwwLjU5ODYxIDIuMjE0MDQsMGMwLjAwMDAxLDAgMC4wMDAwMiwtMC4wMDAwMSAwLjAwMDAzLC0wLjAwMDAybDU3LjM1MjEsLTU2LjE1NTMzYzIuNDQ1NSwtMi4zOTQ0NyA2LjQxMDU0LC0yLjM5NDU2IDguODU2MTYsLTAuMDAwMmMwLjAwMDAzLDAuMDAwMDMgMC4wMDAwNywwLjAwMDA3IDAuMDAwMSwwLjAwMDFsNTcuMzU0OSw1Ni4xNTU0M2MwLjYxMTM5LDAuNTk4NiAxLjYwMjY1LDAuNTk4NiAyLjIxNDA0LDBsNTcuMzUzOTgsLTU2LjE1NDMyYzIuNDQ1NTYsLTIuMzk0NDEgNi40MTA2LC0yLjM5NDQxIDguODU2MTYsMHoiIGZpbGw9IiMzYjk5ZmMiIGlkPSJzdmdfMSIvPjwvc3ZnPg==';\n    _this.supportedTransactionVersions = null;\n    _this._readyState = typeof window === 'undefined' ? WalletReadyState.Unsupported : WalletReadyState.Loadable;\n    _this._disconnected = function () {\n      var wallet = _this._wallet;\n      if (wallet) {\n        wallet.client.off('session_delete', _this._disconnected);\n        _this._wallet = null;\n        _this._publicKey = null;\n        _this.emit('error', new WalletDisconnectedError());\n        _this.emit('disconnect');\n      }\n    };\n    _this._publicKey = null;\n    _this._connecting = false;\n    _this._wallet = null;\n    _this._config = config;\n    return _this;\n  }\n  _createClass(WalletConnectWalletAdapter, [{\n    key: \"publicKey\",\n    get: function get() {\n      return this._publicKey;\n    }\n  }, {\n    key: \"connecting\",\n    get: function get() {\n      return this._connecting;\n    }\n  }, {\n    key: \"readyState\",\n    get: function get() {\n      return this._readyState;\n    }\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var WalletConnectClass, WCChainID, _yield$import, wallet, publicKey, _yield$wallet$connect;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                if (!(this.connected || this.connecting)) {\n                  _context.next = 3;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 3:\n                if (!(this._readyState !== WalletReadyState.Loadable)) {\n                  _context.next = 5;\n                  break;\n                }\n                throw new WalletNotReadyError();\n              case 5:\n                this._connecting = true;\n                _context.prev = 6;\n                _context.next = 9;\n                return import('@jnwng/walletconnect-solana');\n              case 9:\n                _yield$import = _context.sent;\n                WalletConnectClass = _yield$import.WalletConnectWallet;\n                WCChainID = _yield$import.WalletConnectChainID;\n                _context.next = 17;\n                break;\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](6);\n                throw new WalletLoadError(_context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.message, _context.t0);\n              case 17:\n                _context.prev = 17;\n                wallet = new WalletConnectClass({\n                  network: this._config.network === WalletAdapterNetwork.Mainnet ? WCChainID.Mainnet : WCChainID.Devnet,\n                  options: this._config.options\n                });\n                _context.next = 21;\n                return wallet.connect();\n              case 21:\n                _yield$wallet$connect = _context.sent;\n                publicKey = _yield$wallet$connect.publicKey;\n                _context.next = 30;\n                break;\n              case 25:\n                _context.prev = 25;\n                _context.t1 = _context[\"catch\"](17);\n                if (!(_context.t1.constructor.name === 'QRCodeModalError')) {\n                  _context.next = 29;\n                  break;\n                }\n                throw new WalletWindowClosedError();\n              case 29:\n                throw new WalletConnectionError(_context.t1 === null || _context.t1 === void 0 ? void 0 : _context.t1.message, _context.t1);\n              case 30:\n                wallet.client.on('session_delete', this._disconnected);\n                this._wallet = wallet;\n                this._publicKey = publicKey;\n                this.emit('connect', publicKey);\n                _context.next = 40;\n                break;\n              case 36:\n                _context.prev = 36;\n                _context.t2 = _context[\"catch\"](0);\n                this.emit('error', _context.t2);\n                throw _context.t2;\n              case 40:\n                _context.prev = 40;\n                this._connecting = false;\n                return _context.finish(40);\n              case 43:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 36, 40, 43], [6, 14], [17, 25]]);\n      }));\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n      return connect;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var wallet;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                wallet = this._wallet;\n                if (!wallet) {\n                  _context2.next = 13;\n                  break;\n                }\n                wallet.client.off('session_delete', this._disconnected);\n                this._wallet = null;\n                this._publicKey = null;\n                _context2.prev = 5;\n                _context2.next = 8;\n                return wallet.disconnect();\n              case 8:\n                _context2.next = 13;\n                break;\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](5);\n                this.emit('error', new WalletDisconnectionError(_context2.t0 === null || _context2.t0 === void 0 ? void 0 : _context2.t0.message, _context2.t0));\n              case 13:\n                this.emit('disconnect');\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[5, 10]]);\n      }));\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n      return disconnect;\n    }()\n  }, {\n    key: \"signTransaction\",\n    value: function () {\n      var _signTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(transaction) {\n        var wallet;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                wallet = this._wallet;\n                if (wallet) {\n                  _context3.next = 4;\n                  break;\n                }\n                throw new WalletNotConnectedError();\n              case 4:\n                _context3.prev = 4;\n                _context3.next = 7;\n                return wallet.signTransaction(transaction);\n              case 7:\n                return _context3.abrupt(\"return\", _context3.sent);\n              case 10:\n                _context3.prev = 10;\n                _context3.t0 = _context3[\"catch\"](4);\n                throw new WalletSignTransactionError(_context3.t0 === null || _context3.t0 === void 0 ? void 0 : _context3.t0.message, _context3.t0);\n              case 13:\n                _context3.next = 19;\n                break;\n              case 15:\n                _context3.prev = 15;\n                _context3.t1 = _context3[\"catch\"](0);\n                this.emit('error', _context3.t1);\n                throw _context3.t1;\n              case 19:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 15], [4, 10]]);\n      }));\n      function signTransaction(_x) {\n        return _signTransaction.apply(this, arguments);\n      }\n      return signTransaction;\n    }()\n  }, {\n    key: \"signMessage\",\n    value: function () {\n      var _signMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(message) {\n        var wallet;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                wallet = this._wallet;\n                if (wallet) {\n                  _context4.next = 4;\n                  break;\n                }\n                throw new WalletNotConnectedError();\n              case 4:\n                _context4.prev = 4;\n                _context4.next = 7;\n                return wallet.signMessage(message);\n              case 7:\n                return _context4.abrupt(\"return\", _context4.sent);\n              case 10:\n                _context4.prev = 10;\n                _context4.t0 = _context4[\"catch\"](4);\n                throw new WalletSignMessageError(_context4.t0 === null || _context4.t0 === void 0 ? void 0 : _context4.t0.message, _context4.t0);\n              case 13:\n                _context4.next = 19;\n                break;\n              case 15:\n                _context4.prev = 15;\n                _context4.t1 = _context4[\"catch\"](0);\n                this.emit('error', _context4.t1);\n                throw _context4.t1;\n              case 19:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 15], [4, 10]]);\n      }));\n      function signMessage(_x2) {\n        return _signMessage.apply(this, arguments);\n      }\n      return signMessage;\n    }()\n  }]);\n  return WalletConnectWalletAdapter;\n}(BaseSignerWalletAdapter);","map":{"version":3,"mappings":"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","names":["BaseSignerWalletAdapter","WalletAdapterNetwork","WalletConnectionError","WalletDisconnectedError","WalletDisconnectionError","WalletLoadError","WalletNotConnectedError","WalletNotReadyError","WalletReadyState","WalletSignMessageError","WalletSignTransactionError","WalletWindowClosedError","WalletConnectWalletName","WalletConnectWalletAdapter","config","window","Unsupported","Loadable","wallet","_wallet","client","off","_disconnected","_publicKey","emit","_connecting","_config","_readyState","connected","connecting","WalletConnectClass","WalletConnectWallet","WCChainID","WalletConnectChainID","message","network","Mainnet","Devnet","options","connect","publicKey","constructor","name","on","disconnect","transaction","signTransaction","signMessage"],"sources":["/Users/ivan/Metadata/node_modules/@solana/wallet-adapter-walletconnect/src/adapter.ts"],"sourcesContent":["import type {\n    WalletConnectChainID,\n    WalletConnectWallet,\n    WalletConnectWalletAdapterConfig as BaseWalletConnectWalletAdapterConfig,\n} from '@jnwng/walletconnect-solana';\nimport type { WalletName } from '@solana/wallet-adapter-base';\nimport {\n    BaseSignerWalletAdapter,\n    WalletAdapterNetwork,\n    WalletConnectionError,\n    WalletDisconnectedError,\n    WalletDisconnectionError,\n    WalletLoadError,\n    WalletNotConnectedError,\n    WalletNotReadyError,\n    WalletReadyState,\n    WalletSignMessageError,\n    WalletSignTransactionError,\n    WalletWindowClosedError,\n} from '@solana/wallet-adapter-base';\nimport type { PublicKey, Transaction } from '@solana/web3.js';\n\nexport const WalletConnectWalletName = 'WalletConnect' as WalletName<'WalletConnect'>;\n\nexport type WalletConnectWalletAdapterConfig = {\n    network: WalletAdapterNetwork.Mainnet | WalletAdapterNetwork.Devnet;\n} & Pick<BaseWalletConnectWalletAdapterConfig, 'options'>;\n\nexport class WalletConnectWalletAdapter extends BaseSignerWalletAdapter {\n    name = WalletConnectWalletName;\n    url = 'https://walletconnect.org';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNjEuNDM4NTQsOTQuMDAzOGM0OC45MTEyMywtNDcuODg4MTcgMTI4LjIxMTk5LC00Ny44ODgxNyAxNzcuMTIzMjEsMGw1Ljg4NjU1LDUuNzYzNDJjMi40NDU1NiwyLjM5NDQxIDIuNDQ1NTYsNi4yNzY1MSAwLDguNjcwOTJsLTIwLjEzNjcsMTkuNzE1NWMtMS4yMjI3OCwxLjE5NzIxIC0zLjIwNTMsMS4xOTcyMSAtNC40MjgwOCwwbC04LjEwMDU4LC03LjkzMTE1Yy0zNC4xMjE2OSwtMzMuNDA3OTggLTg5LjQ0Mzg5LC0zMy40MDc5OCAtMTIzLjU2NTU4LDBsLTguNjc1MDYsOC40OTM2MWMtMS4yMjI3OCwxLjE5NzIgLTMuMjA1MywxLjE5NzIgLTQuNDI4MDgsMGwtMjAuMTM2NjksLTE5LjcxNTVjLTIuNDQ1NTYsLTIuMzk0NDEgLTIuNDQ1NTYsLTYuMjc2NTIgMCwtOC42NzA5Mmw2LjQ2MTAxLC02LjMyNTg4em0yMTguNzY3OCw0MC43NzM3NWwxNy45MjE3LDE3LjU0Njg5YzIuNDQ1NTQsMi4zOTQ0IDIuNDQ1NTYsNi4yNzY0OCAwLjAwMDAzLDguNjcwODlsLTgwLjgxMDE3LDc5LjEyMTE0Yy0yLjQ0NTU1LDIuMzk0NDIgLTYuNDEwNTksMi4zOTQ0NSAtOC44NTYxNiwwLjAwMDA2Yy0wLjAwMDAxLC0wLjAwMDAxIC0wLjAwMDAzLC0wLjAwMDAyIC0wLjAwMDA0LC0wLjAwMDAzbC01Ny4zNTQxNCwtNTYuMTU0NThjLTAuNjExMzksLTAuNTk4NiAtMS42MDI2NSwtMC41OTg2IC0yLjIxNDA0LDBjMCwwLjAwMDAxIC0wLjAwMDAxLDAuMDAwMDEgLTAuMDAwMDEsMC4wMDAwMmwtNTcuMzUyOTIsNTYuMTU0NTNjLTIuNDQ1NTQsMi4zOTQ0MyAtNi40MTA1OCwyLjM5NDQ3IC04Ljg1NjE2LDAuMDAwMDhjLTAuMDAwMDIsLTAuMDAwMDEgLTAuMDAwMDMsLTAuMDAwMDIgLTAuMDAwMDUsLTAuMDAwMDRsLTgwLjgxMjQyLC03OS4xMjIxOWMtMi40NDU1NiwtMi4zOTQ0IC0yLjQ0NTU2LC02LjI3NjUxIDAsLTguNjcwOTFsMTcuOTIxNzMsLTE3LjU0Njg3YzIuNDQ1NTYsLTIuMzk0NDEgNi40MTA2LC0yLjM5NDQxIDguODU2MTYsMGw1Ny4zNTQ5OCw1Ni4xNTUzNWMwLjYxMTM5LDAuNTk4NjEgMS42MDI2NSwwLjU5ODYxIDIuMjE0MDQsMGMwLjAwMDAxLDAgMC4wMDAwMiwtMC4wMDAwMSAwLjAwMDAzLC0wLjAwMDAybDU3LjM1MjEsLTU2LjE1NTMzYzIuNDQ1NSwtMi4zOTQ0NyA2LjQxMDU0LC0yLjM5NDU2IDguODU2MTYsLTAuMDAwMmMwLjAwMDAzLDAuMDAwMDMgMC4wMDAwNywwLjAwMDA3IDAuMDAwMSwwLjAwMDFsNTcuMzU0OSw1Ni4xNTU0M2MwLjYxMTM5LDAuNTk4NiAxLjYwMjY1LDAuNTk4NiAyLjIxNDA0LDBsNTcuMzUzOTgsLTU2LjE1NDMyYzIuNDQ1NTYsLTIuMzk0NDEgNi40MTA2LC0yLjM5NDQxIDguODU2MTYsMHoiIGZpbGw9IiMzYjk5ZmMiIGlkPSJzdmdfMSIvPjwvc3ZnPg==';\n    readonly supportedTransactionVersions = null;\n\n    private _publicKey: PublicKey | null;\n    private _connecting: boolean;\n    private _wallet: WalletConnectWallet | null;\n    private _config: WalletConnectWalletAdapterConfig;\n    private _readyState: WalletReadyState =\n        typeof window === 'undefined' ? WalletReadyState.Unsupported : WalletReadyState.Loadable;\n\n    constructor(config: WalletConnectWalletAdapterConfig) {\n        super();\n\n        this._publicKey = null;\n        this._connecting = false;\n        this._wallet = null;\n        this._config = config;\n    }\n\n    get publicKey() {\n        return this._publicKey;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    get readyState() {\n        return this._readyState;\n    }\n\n    async connect(): Promise<void> {\n        try {\n            if (this.connected || this.connecting) return;\n            if (this._readyState !== WalletReadyState.Loadable) throw new WalletNotReadyError();\n\n            this._connecting = true;\n\n            let WalletConnectClass: typeof WalletConnectWallet;\n            let WCChainID: typeof WalletConnectChainID;\n            try {\n                ({ WalletConnectWallet: WalletConnectClass, WalletConnectChainID: WCChainID } = await import(\n                    '@jnwng/walletconnect-solana'\n                ));\n            } catch (error: any) {\n                throw new WalletLoadError(error?.message, error);\n            }\n\n            let wallet: WalletConnectWallet;\n            let publicKey: PublicKey;\n            try {\n                wallet = new WalletConnectClass({\n                    network:\n                        this._config.network === WalletAdapterNetwork.Mainnet ? WCChainID.Mainnet : WCChainID.Devnet,\n                    options: this._config.options,\n                });\n\n                ({ publicKey } = await wallet.connect());\n            } catch (error: any) {\n                if (error.constructor.name === 'QRCodeModalError') throw new WalletWindowClosedError();\n                throw new WalletConnectionError(error?.message, error);\n            }\n\n            wallet.client.on('session_delete', this._disconnected);\n\n            this._wallet = wallet;\n            this._publicKey = publicKey;\n\n            this.emit('connect', publicKey);\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        const wallet = this._wallet;\n        if (wallet) {\n            wallet.client.off('session_delete', this._disconnected);\n\n            this._wallet = null;\n            this._publicKey = null;\n\n            try {\n                await wallet.disconnect();\n            } catch (error: any) {\n                this.emit('error', new WalletDisconnectionError(error?.message, error));\n            }\n        }\n\n        this.emit('disconnect');\n    }\n\n    async signTransaction<T extends Transaction>(transaction: T): Promise<T> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                return (await wallet.signTransaction(transaction)) as T;\n            } catch (error: any) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: Uint8Array): Promise<Uint8Array> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                return await wallet.signMessage(message);\n            } catch (error: any) {\n                throw new WalletSignMessageError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    private _disconnected = () => {\n        const wallet = this._wallet;\n        if (wallet) {\n            wallet.client.off('session_delete', this._disconnected);\n\n            this._wallet = null;\n            this._publicKey = null;\n\n            this.emit('error', new WalletDisconnectedError());\n            this.emit('disconnect');\n        }\n    };\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}